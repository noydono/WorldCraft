{"remainingRequest":"/home/noy/git/WorldCraft/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/noy/git/WorldCraft/src/components/global/createSujetComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/noy/git/WorldCraft/src/components/global/createSujetComponent.vue","mtime":1619243338787},{"path":"/home/noy/git/WorldCraft/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noy/git/WorldCraft/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/noy/git/WorldCraft/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/noy/git/WorldCraft/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noy/git/WorldCraft/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwQWN0aW9ucywgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFZ1ZUp3dERlY29kZSBmcm9tICJ2dWUtand0LWRlY29kZSI7CgpleHBvcnQgZGVmYXVsdCB7CgogIGRhdGE6ICgpID0+ICh7CiAgICBuZXdTdWpldDoge30sCiAgICBkaWFsb2c6IGZhbHNlLAogICAgc2VsZWN0Q2F0ZWdvcmllOiBmYWxzZSwKICB9KSwKCiAgY3JlYXRlZCgpIHsKCiAgICB0aGlzLmdldENhdGVnb3JpZSgpOwogICAgdGhpcy5nZXRTZWN0aW9uKCk7CgogIH0sCgogIG1ldGhvZHM6IHsKCiAgICAuLi5tYXBNdXRhdGlvbnMoWyJTRVRfREFUQSJdKSwKICAgIC4uLm1hcEFjdGlvbnMoWyJnZXRDYXRlZ29yaWUiLCAiZ2V0U2VjdGlvbiIsICJzZXRTdWpldCJdKSwKCiAgICBfc2V0Rm9ybSgpIHsKICAgICAgICBsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0Iik7CiAgICAgICAgaWYodG9rZW4pewogICAgICAgICAgbGV0IGRlY29kZWQgPSBWdWVKd3REZWNvZGUuZGVjb2RlKHRva2VuKTsKICAgICAgICAgIHRoaXMubmV3U3VqZXQuYXV0aG9yID0gZGVjb2RlZC5wc2V1ZG8KICAgICAgICB9ICAgICAgICAKICAgICAgICB0aGlzLlNFVF9EQVRBKHRoaXMubmV3U3VqZXQpOwogICAgfSwKCiAgICBmb3JtYXRUYWcoKXsgIAogICAgICAgIGxldCBhcnJheVRhZyA9IFtdOwogICAgICAgIGFycmF5VGFnID0gdGhpcy5uZXdTdWpldC50YWcuc3BsaXQoIiAiIHx8ICIgIyAiKTsKICAgICAgICB0aGlzLm5ld1N1amV0LnRhZyA9IGFycmF5VGFnOwogICAgfSwKCiAgICBzdWJtaXRTdWpldChldmVudCkgewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlOwogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLnNldFN1amV0KCk7CiAgICB9LAoKICAgIGZpbHRlclNtYWxsQ2F0ZWdvcmllKGNhdGVnb3JpZUlEKSB7CiAgICAgIHZhciBhcnJheUNhdCA9IFtdOwogICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICBpZiAoY2F0ZWdvcmllSUQgPT09IGl0ZW0uY2F0ZWdvcmllX2lkKSB7CiAgICAgICAgICBhcnJheUNhdC5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBhcnJheUNhdDsKICAgIH0sCgogICAgU2VsZWN0Q2F0ZWdvcmllKGlkKSB7CiAgICAgIHRoaXMubmV3U3VqZXQuc2VjdGlvbl9pZCA9IGlkOwogICAgICB0aGlzLnNlbGVjdENhdGVnb3JpZSA9IHRydWU7CiAgICB9LAoKICAgIHJldG91cigpIHsKICAgICAgdGhpcy5uZXdTdWpldC5zZWN0aW9uX2lkID0gbnVsbDsKICAgICAgdGhpcy5zZWxlY3RDYXRlZ29yaWUgPSBmYWxzZTsKICAgIH0sCgogIH0sCgogIGNvbXB1dGVkOiB7CgogICAgLi4ubWFwU3RhdGUoewogICAgICBjYXRlZ29yaWVzOiBzdGF0ZSA9PiBzdGF0ZS5jYXRlZ29yaWUuY2F0ZWdvcmllcywgCiAgICAgIHNlY3Rpb25zOiBzdGF0ZSA9PiBzdGF0ZS5zZWN0aW9uLnNlY3Rpb25zCiAgICAgIH0pLAoKICB9LAp9OwoK"},{"version":3,"sources":["createSujetComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"createSujetComponent.vue","sourceRoot":"src/components/global","sourcesContent":["<template>\n  <v-dialog \n    v-model=\"dialog\" \n    persistent \n    max-width=\"600\"\n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-btn \n        class=\"mt-2\" \n        text \n        v-bind=\"attrs\" \n        v-on=\"on\"\n      > Crée un sujet </v-btn>\n    </template>\n\n    <!-- crud Sujet récuperation de l'id de la catégorie -->\n    <v-card v-if=\"selectCategorie == false\">\n      <v-card-title>\n        <h3>Choisir une categorie</h3>\n        <i \n          @click=\"dialog = false\" \n          class=\"fas fa-times ml-auto\"\n        ></i>\n      </v-card-title>\n\n      <v-list width=\"100%\">\n        <v-list-group\n          v-for=\"(categorie, key) in categories\"\n          :key=\"key\"\n          no-action\n        >\n          <template v-slot:activator>\n            <v-list-item-content>\n              <h1 \n                style=\"font-size: 20px\" \n                v-text=\"categorie.name\"\n              ></h1>\n            </v-list-item-content>\n          </template>\n\n          <v-list-item\n            v-for=\"(section, key) in filterSmallCategorie(\n              categorie.id\n            )\"\n            :key=\"key\"\n            @click=\"SelectCategorie(section.id)\"\n          >\n            <v-list-item-icon class=\"mt-6 grey--text text--darken-2\">\n              <v-icon\n                v-text=\"section.icon\"\n                style=\"font-size: 30px\"\n              ></v-icon>\n            </v-list-item-icon>\n            <v-list-item-content>\n              <div class=\"d-flex flex-row justify-start align-start\">\n                <div\n                  class=\"subtitle-1 mt-1 grey--text text--darken-4\"\n                  v-text=\"section.name\"\n                ></div>\n                <!-- <v-chip x-small class=\"ma-2 grey\"> nouveaux </v-chip> -->\n              </div>\n\n              <v-list-item-title\n                class=\"subtitle-2 grey--text\"\n                v-text=\"section.description\"\n              ></v-list-item-title>\n            </v-list-item-content>\n\n          </v-list-item>\n        </v-list-group>\n      </v-list>\n    </v-card>\n\n    <!-- crud SUjet récuperation du titre, déscritpion, tag -->\n    <v-card v-if=\"selectCategorie == true\">\n      <form @submit=\"submitSujet\">\n        <v-card-title>\n          <h3>Creation de sujet</h3>\n          <i \n            @click=\"dialog = false\" \n            class=\"fas fa-times ml-auto\"\n          ></i>\n        </v-card-title>\n\n        <v-card-text>\n          <v-text-field\n            v-model=\"newSujet.title\"\n            label=\"Titre du sujet\"\n            @change=\"_setForm()\"\n          ></v-text-field>\n          <v-textarea\n            outlined\n            v-model=\"newSujet.content\"\n            name=\"input-7-4\"\n            label=\"description de la sujet\"\n            value=\"newSujet.description\"\n          ></v-textarea>\n          <v-text-field\n            v-model=\"newSujet.tag\"\n            label=\"Tag du sujet\"\n            @change=\"formatTag()\"\n          ></v-text-field>\n        </v-card-text>\n\n        <v-card-actions>\n          <v-btn \n            color=\"green darken-1\" \n            @click=\"retour()\"\n          >Annuler</v-btn>\n          <v-btn \n            class=\"mr-auto\" \n            @click=\"_setForm()\" \n            type=\"submit\"\n          >Suivant</v-btn>\n        </v-card-actions>\n      </form>\n    </v-card>\n\n  </v-dialog>\n</template>\n\n<script>\nimport { mapMutations, mapActions, mapState } from \"vuex\";\nimport VueJwtDecode from \"vue-jwt-decode\";\n\nexport default {\n\n  data: () => ({\n    newSujet: {},\n    dialog: false,\n    selectCategorie: false,\n  }),\n\n  created() {\n\n    this.getCategorie();\n    this.getSection();\n\n  },\n\n  methods: {\n\n    ...mapMutations([\"SET_DATA\"]),\n    ...mapActions([\"getCategorie\", \"getSection\", \"setSujet\"]),\n\n    _setForm() {\n        let token = localStorage.getItem(\"jwt\");\n        if(token){\n          let decoded = VueJwtDecode.decode(token);\n          this.newSujet.author = decoded.pseudo\n        }        \n        this.SET_DATA(this.newSujet);\n    },\n\n    formatTag(){  \n        let arrayTag = [];\n        arrayTag = this.newSujet.tag.split(\" \" || \" # \");\n        this.newSujet.tag = arrayTag;\n    },\n\n    submitSujet(event) {\n      this.dialog = false;\n      event.preventDefault();\n      this.setSujet();\n    },\n\n    filterSmallCategorie(categorieID) {\n      var arrayCat = [];\n      this.sections.forEach((item) => {\n        if (categorieID === item.categorie_id) {\n          arrayCat.push(item);\n        }\n      });\n      return arrayCat;\n    },\n\n    SelectCategorie(id) {\n      this.newSujet.section_id = id;\n      this.selectCategorie = true;\n    },\n\n    retour() {\n      this.newSujet.section_id = null;\n      this.selectCategorie = false;\n    },\n\n  },\n\n  computed: {\n\n    ...mapState({\n      categories: state => state.categorie.categories, \n      sections: state => state.section.sections\n      }),\n\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n.fas {\n  cursor: pointer;\n  transition: 0.5s;\n  &:hover {\n    transform: rotate(90deg);\n  }\n}\n</style>"]}]}