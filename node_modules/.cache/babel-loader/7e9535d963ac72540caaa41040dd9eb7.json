{"remainingRequest":"/home/noy/git/WorldCraft/node_modules/babel-loader/lib/index.js!/home/noy/git/WorldCraft/node_modules/eslint-loader/index.js??ref--13-0!/home/noy/git/WorldCraft/src/store/auth/auth.js","dependencies":[{"path":"/home/noy/git/WorldCraft/src/store/auth/auth.js","mtime":1619243338787},{"path":"/home/noy/git/WorldCraft/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noy/git/WorldCraft/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/noy/git/WorldCraft/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbm95L2dpdC9Xb3JsZENyYWZ0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsgLy8gaW1wb3J0IHJvdXRlciBmcm9tICIuLi8uLi9yb3V0ZXIiOwoKaW1wb3J0IHN3YWwgZnJvbSAnc3dlZXRhbGVydCc7CnZhciBBcGlVcmwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2F1dGgiOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHsKICAgIGlzTG9naW46IGZhbHNlLAogICAgaXNBZG1pbjogZmFsc2UKICB9LAogIG11dGF0aW9uczogewogICAgU0VUX0xPR0lOOiBmdW5jdGlvbiBTRVRfTE9HSU4oc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmlzTG9naW4gPSB2YWx1ZTsKICAgIH0sCiAgICBTRVRfQURNSU46IGZ1bmN0aW9uIFNFVF9BRE1JTihzdGF0ZSwgdmFsdWUpIHsKICAgICAgc3RhdGUuaXNBZG1pbiA9IHZhbHVlOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgc2lnbnVwOiBmdW5jdGlvbiBzaWdudXAoY29udGV4dCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZSwgdG9rZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KEFwaVVybCArICIvc2lnbnVwIiwgY29udGV4dC5yb290U3RhdGUuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHRva2VuID0gcmVzcG9uc2UuZGF0YS50b2tlbjsKCiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dCIsIHRva2VuKTsKICAgICAgICAgICAgICAgICAgc3dhbCgiU3VjY2VzcyIsICJVbiBNYWlsIERlIHZlcmlmaWNhdGlvbiB2b3VzIGEgw6l0w6kgZW52b3llciIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzd2FsKCJFcnJvciIsICJRdWVscXVlIGNob3NlIHMnZXN0IG1hbCBwYXNzw6kgOiAiICsgcmVzcG9uc2UuZGF0YS5lcnIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBzd2FsKCJFcnJvciIsIF9jb250ZXh0LnQwLCAiZXJyb3IiKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbmluOiBmdW5jdGlvbiBzaWduaW4oY29udGV4dCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChBcGlVcmwgKyAiL2xvZ2luIiwgY29udGV4dC5yb290U3RhdGUuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiU0VUX0xPR0lOIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB0b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0IiwgdG9rZW4pOwoKICAgICAgICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICAgICAgICBzd2FsKCJTdWNjZXNzIiwgIkNvbm5leGlvbiByZXVzc2kiLCAic3VjY2VzcyIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBzd2FsKCJFcnJvciIsICJRdWVscXVlIGNob3NlIHMnZXN0IG1hbCBwYXNzw6kgOiAiLCAiZXJyb3IiKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1swLCAxMF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoY29udGV4dCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImp3dCIpOwogICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiU0VUX0xPR0lOIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgICBzd2FsKCJTdWNjZXNzIiwgImTDqWNvbm5leGlvbiByw6l1c3NpIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgICBzd2FsKCJFcnJvciIsICJRdWVscXVlIGNob3NlIHMnZXN0IG1hbCBwYXNzw6kgOiAiLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/noy/git/WorldCraft/src/store/auth/auth.js"],"names":["axios","swal","ApiUrl","state","isLogin","isAdmin","mutations","SET_LOGIN","value","SET_ADMIN","actions","signup","context","post","rootState","data","response","token","localStorage","setItem","err","signin","commit","logout","removeItem","exception"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,YAAjB;AAEA,IAAMC,MAAM,GAAG,4BAAf;AAEA,eAAe;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAE,KADJ;AAELC,IAAAA,OAAO,EAAE;AAFJ,GAFM;AAObC,EAAAA,SAAS,EAAE;AAETC,IAAAA,SAFS,qBAECJ,KAFD,EAEQK,KAFR,EAEe;AACtBL,MAAAA,KAAK,CAACC,OAAN,GAAgBI,KAAhB;AACD,KAJQ;AAKTC,IAAAA,SALS,qBAKCN,KALD,EAKQK,KALR,EAKe;AACtBL,MAAAA,KAAK,CAACE,OAAN,GAAgBG,KAAhB;AACD;AAPQ,GAPE;AAkBbE,EAAAA,OAAO,EAAE;AAEDC,IAAAA,MAFC,kBAEMC,OAFN,EAEe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKGZ,KAAK,CAACa,IAAN,CAAYX,MAAM,GAAG,SAArB,EAAgCU,OAAO,CAACE,SAAR,CAAkBC,IAAlD,CALH;;AAAA;AAKdC,gBAAAA,QALc;AAMdC,gBAAAA,KANc,GAMND,QAAQ,CAACD,IAAT,CAAcE,KANR;;AAQlB,oBAAIA,KAAJ,EAAW;AAETC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BF,KAA5B;AACAhB,kBAAAA,IAAI,CAAC,SAAD,EAAY,4CAAZ,EAA0D,SAA1D,CAAJ;AAED,iBALD,MAKO;AAELA,kBAAAA,IAAI,CAAC,OAAD,EAAU,qCAAqCe,QAAQ,CAACD,IAAT,CAAcK,GAA7D,EAAkE,OAAlE,CAAJ;AAED;;AAjBiB;AAAA;;AAAA;AAAA;AAAA;AAqBhBnB,gBAAAA,IAAI,CAAC,OAAD,eAAc,OAAd,CAAJ;;AArBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBrB,KA3BM;AA6BDoB,IAAAA,MA7BC,kBA6BMT,OA7BN,EA6Be;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIGZ,KAAK,CAACa,IAAN,CAAYX,MAAM,GAAG,QAArB,EAA+BU,OAAO,CAACE,SAAR,CAAkBC,IAAjD,CAJH;;AAAA;AAIdC,gBAAAA,QAJc;AAMlBJ,gBAAAA,OAAO,CAACU,MAAR,CAAe,WAAf,EAA4B,IAA5B;AAEIL,gBAAAA,KARc,GAQND,QAAQ,CAACD,IAAT,CAAcE,KARR;AASlBC,gBAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BF,KAA5B;;AACA,oBAAIA,KAAJ,EAAW;AACThB,kBAAAA,IAAI,CAAC,SAAD,EAAY,kBAAZ,EAAgC,SAAhC,CAAJ;AACD;;AAZiB;AAAA;;AAAA;AAAA;AAAA;AAelBA,gBAAAA,IAAI,CAAC,OAAD,EAAU,kCAAV,EAA8C,OAA9C,CAAJ;;AAfkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBrB,KA/CM;AAiDDsB,IAAAA,MAjDC,kBAiDMX,OAjDN,EAiDe;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpB,oBAAG;AAEDM,kBAAAA,YAAY,CAACM,UAAb,CAAwB,KAAxB;AACAZ,kBAAAA,OAAO,CAACU,MAAR,CAAe,WAAf,EAA4B,KAA5B;AACArB,kBAAAA,IAAI,CAAC,SAAD,EAAY,oBAAZ,EAAkC,SAAlC,CAAJ;AAED,iBAND,CAMC,OAAMwB,SAAN,EAAgB;AAEfxB,kBAAAA,IAAI,CAAC,OAAD,EAAU,kCAAV,EAA8C,OAA9C,CAAJ;AAED;;AAZmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAerB;AAhEM;AAlBI,CAAf","sourcesContent":["import axios from \"axios\";\n// import router from \"../../router\";\nimport swal from 'sweetalert';\n\nconst ApiUrl = \"http://localhost:8080/auth\"\n\nexport default {\n\n  state: {\n    isLogin: false,\n    isAdmin: false\n  },\n\n  mutations: {\n\n    SET_LOGIN(state, value) {\n      state.isLogin = value\n    },\n    SET_ADMIN(state, value) {\n      state.isAdmin = value\n    }\n\n  },\n\n  actions: {\n\n    async signup(context) {\n\n      \n      try {\n\n        let response = await axios.post( ApiUrl + \"/signup\", context.rootState.data );\n        let token = response.data.token;\n\n        if (token) {\n\n          localStorage.setItem(\"jwt\", token);\n          swal(\"Success\", \"Un Mail De verification vous a été envoyer\", \"success\");\n        \n        } else {\n          \n          swal(\"Error\", \"Quelque chose s'est mal passé : \" + response.data.err, \"error\");\n        \n        }\n\n      } catch (err) {\n\n          swal(\"Error\",err, \"error\");\n    \n      }\n\n    },\n\n    async signin(context) {\n      \n      try {\n\n        let response = await axios.post( ApiUrl + \"/login\", context.rootState.data);\n\n        context.commit(\"SET_LOGIN\", true)\n        \n        let token = response.data.token;\n        localStorage.setItem(\"jwt\", token);\n        if (token) {\n          swal(\"Success\", \"Connexion reussi\", \"success\");\n        }\n\n      } catch (err) {\n        swal(\"Error\", \"Quelque chose s'est mal passé : \", \"error\");\n      }\n\n    },\n    \n    async logout(context) {\n\n      try{\n\n        localStorage.removeItem(\"jwt\");\n        context.commit(\"SET_LOGIN\", false)\n        swal(\"Success\", \"déconnexion réussi\", \"success\");\n\n      }catch(exception){\n\n        swal(\"Error\", \"Quelque chose s'est mal passé : \", \"error\");\n\n      }\n      \n\n    },\n  }\n}\n"]}]}