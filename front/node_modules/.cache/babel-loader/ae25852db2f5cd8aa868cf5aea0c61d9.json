{"remainingRequest":"/home/noydono/Documents/worldcraft/front/node_modules/babel-loader/lib/index.js!/home/noydono/Documents/worldcraft/front/node_modules/eslint-loader/index.js??ref--13-0!/home/noydono/Documents/worldcraft/front/src/store/auth/auth.js","dependencies":[{"path":"/home/noydono/Documents/worldcraft/front/src/store/auth/auth.js","mtime":1619284328462},{"path":"/home/noydono/Documents/worldcraft/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noydono/Documents/worldcraft/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/noydono/Documents/worldcraft/front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbm95ZG9uby9Eb2N1bWVudHMvd29ybGRjcmFmdC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vIGltcG9ydCByb3V0ZXIgZnJvbSAiLi4vLi4vcm91dGVyIjsKCmltcG9ydCBzd2FsIGZyb20gJ3N3ZWV0YWxlcnQnOwp2YXIgQXBpVXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hdXRoIjsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICBpc0xvZ2luOiBmYWxzZSwKICAgIGlzQWRtaW46IGZhbHNlCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9MT0dJTjogZnVuY3Rpb24gU0VUX0xPR0lOKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5pc0xvZ2luID0gdmFsdWU7CiAgICB9LAogICAgU0VUX0FETUlOOiBmdW5jdGlvbiBTRVRfQURNSU4oc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmlzQWRtaW4gPSB2YWx1ZTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHNpZ251cDogZnVuY3Rpb24gc2lnbnVwKGNvbnRleHQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChBcGlVcmwgKyAiL3NpZ251cCIsIGNvbnRleHQucm9vdFN0YXRlLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB0b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47CgogICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCB0b2tlbik7CiAgICAgICAgICAgICAgICAgIHN3YWwoIlN1Y2Nlc3MiLCAiVW4gTWFpbCBEZSB2ZXJpZmljYXRpb24gdm91cyBhIMOpdMOpIGVudm95ZXIiLCAic3VjY2VzcyIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc3dhbCgiRXJyb3IiLCAiUXVlbHF1ZSBjaG9zZSBzJ2VzdCBtYWwgcGFzc8OpIDogIiArIHJlc3BvbnNlLmRhdGEuZXJyLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgc3dhbCgiRXJyb3IiLCBfY29udGV4dC50MCwgImVycm9yIik7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDhdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25pbjogZnVuY3Rpb24gc2lnbmluKGNvbnRleHQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlLCB0b2tlbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoQXBpVXJsICsgIi9sb2dpbiIsIGNvbnRleHQucm9vdFN0YXRlLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoIlNFVF9MT0dJTiIsIHRydWUpOwogICAgICAgICAgICAgICAgdG9rZW4gPSByZXNwb25zZS5kYXRhLnRva2VuOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dCIsIHRva2VuKTsKCiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICAgICAgc3dhbCgiU3VjY2VzcyIsICJDb25uZXhpb24gcmV1c3NpIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgc3dhbCgiRXJyb3IiLCAiUXVlbHF1ZSBjaG9zZSBzJ2VzdCBtYWwgcGFzc8OpIDogIiArIF9jb250ZXh0Mi50MCwgImVycm9yIik7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KGNvbnRleHQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJqd3QiKTsKICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoIlNFVF9MT0dJTiIsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgc3dhbCgiU3VjY2VzcyIsICJkw6ljb25uZXhpb24gcsOpdXNzaSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHsKICAgICAgICAgICAgICAgICAgc3dhbCgiRXJyb3IiLCAiUXVlbHF1ZSBjaG9zZSBzJ2VzdCBtYWwgcGFzc8OpIDogIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/noydono/Documents/worldcraft/front/src/store/auth/auth.js"],"names":["axios","swal","ApiUrl","state","isLogin","isAdmin","mutations","SET_LOGIN","value","SET_ADMIN","actions","signup","context","post","rootState","data","response","token","localStorage","setItem","err","signin","commit","logout","removeItem","exception"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,YAAjB;AAEA,IAAMC,MAAM,GAAG,4BAAf;AAEA,eAAe;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAE,KADJ;AAELC,IAAAA,OAAO,EAAE;AAFJ,GAFM;AAObC,EAAAA,SAAS,EAAE;AAETC,IAAAA,SAFS,qBAECJ,KAFD,EAEQK,KAFR,EAEe;AACtBL,MAAAA,KAAK,CAACC,OAAN,GAAgBI,KAAhB;AACD,KAJQ;AAKTC,IAAAA,SALS,qBAKCN,KALD,EAKQK,KALR,EAKe;AACtBL,MAAAA,KAAK,CAACE,OAAN,GAAgBG,KAAhB;AACD;AAPQ,GAPE;AAkBbE,EAAAA,OAAO,EAAE;AAEDC,IAAAA,MAFC,kBAEMC,OAFN,EAEe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKGZ,KAAK,CAACa,IAAN,CAAYX,MAAM,GAAG,SAArB,EAAgCU,OAAO,CAACE,SAAR,CAAkBC,IAAlD,CALH;;AAAA;AAKdC,gBAAAA,QALc;AAMdC,gBAAAA,KANc,GAMND,QAAQ,CAACD,IAAT,CAAcE,KANR;;AAQlB,oBAAIA,KAAJ,EAAW;AAETC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BF,KAA5B;AACAhB,kBAAAA,IAAI,CAAC,SAAD,EAAY,4CAAZ,EAA0D,SAA1D,CAAJ;AAED,iBALD,MAKO;AAELA,kBAAAA,IAAI,CAAC,OAAD,EAAU,qCAAqCe,QAAQ,CAACD,IAAT,CAAcK,GAA7D,EAAkE,OAAlE,CAAJ;AAED;;AAjBiB;AAAA;;AAAA;AAAA;AAAA;AAqBhBnB,gBAAAA,IAAI,CAAC,OAAD,eAAc,OAAd,CAAJ;;AArBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBrB,KA3BM;AA6BDoB,IAAAA,MA7BC,kBA6BMT,OA7BN,EA6Be;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIGZ,KAAK,CAACa,IAAN,CAAYX,MAAM,GAAG,QAArB,EAA+BU,OAAO,CAACE,SAAR,CAAkBC,IAAjD,CAJH;;AAAA;AAIdC,gBAAAA,QAJc;AAMlBJ,gBAAAA,OAAO,CAACU,MAAR,CAAe,WAAf,EAA4B,IAA5B;AAEIL,gBAAAA,KARc,GAQND,QAAQ,CAACD,IAAT,CAAcE,KARR;AASlBC,gBAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BF,KAA5B;;AACA,oBAAIA,KAAJ,EAAW;AACThB,kBAAAA,IAAI,CAAC,SAAD,EAAY,kBAAZ,EAAgC,SAAhC,CAAJ;AACD;;AAZiB;AAAA;;AAAA;AAAA;AAAA;AAelBA,gBAAAA,IAAI,CAAC,OAAD,EAAU,iDAAV,EAAoD,OAApD,CAAJ;;AAfkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBrB,KA/CM;AAiDDsB,IAAAA,MAjDC,kBAiDMX,OAjDN,EAiDe;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpB,oBAAG;AAEDM,kBAAAA,YAAY,CAACM,UAAb,CAAwB,KAAxB;AACAZ,kBAAAA,OAAO,CAACU,MAAR,CAAe,WAAf,EAA4B,KAA5B;AACArB,kBAAAA,IAAI,CAAC,SAAD,EAAY,oBAAZ,EAAkC,SAAlC,CAAJ;AAED,iBAND,CAMC,OAAMwB,SAAN,EAAgB;AAEfxB,kBAAAA,IAAI,CAAC,OAAD,EAAU,kCAAV,EAA8C,OAA9C,CAAJ;AAED;;AAZmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAerB;AAhEM;AAlBI,CAAf","sourcesContent":["import axios from \"axios\";\n// import router from \"../../router\";\nimport swal from 'sweetalert';\n\nconst ApiUrl = \"http://localhost:8080/auth\"\n\nexport default {\n\n  state: {\n    isLogin: false,\n    isAdmin: false\n  },\n\n  mutations: {\n\n    SET_LOGIN(state, value) {\n      state.isLogin = value\n    },\n    SET_ADMIN(state, value) {\n      state.isAdmin = value\n    }\n\n  },\n\n  actions: {\n\n    async signup(context) {\n\n      \n      try {\n\n        let response = await axios.post( ApiUrl + \"/signup\", context.rootState.data );\n        let token = response.data.token;\n\n        if (token) {\n\n          localStorage.setItem(\"jwt\", token);\n          swal(\"Success\", \"Un Mail De verification vous a été envoyer\", \"success\");\n        \n        } else {\n          \n          swal(\"Error\", \"Quelque chose s'est mal passé : \" + response.data.err, \"error\");\n        \n        }\n\n      } catch (err) {\n\n          swal(\"Error\",err, \"error\");\n    \n      }\n\n    },\n\n    async signin(context) {\n      \n      try {\n\n        let response = await axios.post( ApiUrl + \"/login\", context.rootState.data);\n\n        context.commit(\"SET_LOGIN\", true)\n        \n        let token = response.data.token;\n        localStorage.setItem(\"jwt\", token);\n        if (token) {\n          swal(\"Success\", \"Connexion reussi\", \"success\");\n        }\n\n      } catch (err) {\n        swal(\"Error\", \"Quelque chose s'est mal passé : \" + err, \"error\");\n      }\n\n    },\n    \n    async logout(context) {\n\n      try{\n\n        localStorage.removeItem(\"jwt\");\n        context.commit(\"SET_LOGIN\", false)\n        swal(\"Success\", \"déconnexion réussi\", \"success\");\n\n      }catch(exception){\n\n        swal(\"Error\", \"Quelque chose s'est mal passé : \", \"error\");\n\n      }\n      \n\n    },\n  }\n}\n"]}]}