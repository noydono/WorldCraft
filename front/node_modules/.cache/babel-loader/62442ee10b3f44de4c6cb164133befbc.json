{"remainingRequest":"/home/noydono/Documents/worldcraftMVC/front/node_modules/babel-loader/lib/index.js!/home/noydono/Documents/worldcraftMVC/front/node_modules/eslint-loader/index.js??ref--13-0!/home/noydono/Documents/worldcraftMVC/front/src/store/auth/auth.js","dependencies":[{"path":"/home/noydono/Documents/worldcraftMVC/front/src/store/auth/auth.js","mtime":1619416805756},{"path":"/home/noydono/Documents/worldcraftMVC/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noydono/Documents/worldcraftMVC/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/noydono/Documents/worldcraftMVC/front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbm95ZG9uby9Eb2N1bWVudHMvd29ybGRjcmFmdE1WQy9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7IC8vIGltcG9ydCByb3V0ZXIgZnJvbSAiLi4vLi4vcm91dGVyIjsKCmltcG9ydCBzd2FsIGZyb20gJ3N3ZWV0YWxlcnQnOwp2YXIgQXBpVXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hdXRoIjsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICBpc0xvZ2luOiBmYWxzZSwKICAgIGlzQWRtaW46IGZhbHNlCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9MT0dJTjogZnVuY3Rpb24gU0VUX0xPR0lOKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5pc0xvZ2luID0gdmFsdWU7CiAgICB9LAogICAgU0VUX0FETUlOOiBmdW5jdGlvbiBTRVRfQURNSU4oc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmlzQWRtaW4gPSB2YWx1ZTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHNpZ251cDogZnVuY3Rpb24gc2lnbnVwKGNvbnRleHQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChBcGlVcmwgKyAiL3NpZ251cCIsIGNvbnRleHQucm9vdFN0YXRlLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB0b2tlbiA9IHJlc3BvbnNlOwoKICAgICAgICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0IiwgdG9rZW4pOwogICAgICAgICAgICAgICAgICBzd2FsKCJTdWNjZXNzIiwgIlVuIE1haWwgRGUgdmVyaWZpY2F0aW9uIHZvdXMgYSDDqXTDqSBlbnZveWVyIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoIkVycm9yIiwgIlF1ZWxxdWUgY2hvc2Ugcydlc3QgbWFsIHBhc3PDqSA6ICIgKyByZXNwb25zZS5kYXRhLmVyciwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA4OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHN3YWwoIkVycm9yIiwgX2NvbnRleHQudDAsICJlcnJvciIpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCA4XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzaWduaW46IGZ1bmN0aW9uIHNpZ25pbihjb250ZXh0KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXNwb25zZSwgdG9rZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KEFwaVVybCArICIvbG9naW4iLCBjb250ZXh0LnJvb3RTdGF0ZS5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJTRVRfTE9HSU4iLCB0cnVlKTsKICAgICAgICAgICAgICAgIHRva2VuID0gcmVzcG9uc2UuZGF0YS50b2tlbjsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCB0b2tlbik7CgogICAgICAgICAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoIlN1Y2Nlc3MiLCAiQ29ubmV4aW9uIHJldXNzaSIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHN3YWwoIkVycm9yIiwgIlF1ZWxxdWUgY2hvc2Ugcydlc3QgbWFsIHBhc3PDqSA6ICIgKyBfY29udGV4dDIudDAsICJlcnJvciIpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDEwXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChjb250ZXh0KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiand0Iik7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJTRVRfTE9HSU4iLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgIHN3YWwoIlN1Y2Nlc3MiLCAiZMOpY29ubmV4aW9uIHLDqXVzc2kiLCAic3VjY2VzcyIpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoIkVycm9yIiwgIlF1ZWxxdWUgY2hvc2Ugcydlc3QgbWFsIHBhc3PDqSA6ICIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/noydono/Documents/worldcraftMVC/front/src/store/auth/auth.js"],"names":["axios","swal","ApiUrl","state","isLogin","isAdmin","mutations","SET_LOGIN","value","SET_ADMIN","actions","signup","context","post","rootState","data","response","token","localStorage","setItem","err","signin","commit","logout","removeItem","exception"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,YAAjB;AAEA,IAAMC,MAAM,GAAG,4BAAf;AAEA,eAAe;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAE,KADJ;AAELC,IAAAA,OAAO,EAAE;AAFJ,GAFM;AAObC,EAAAA,SAAS,EAAE;AAETC,IAAAA,SAFS,qBAECJ,KAFD,EAEQK,KAFR,EAEe;AACtBL,MAAAA,KAAK,CAACC,OAAN,GAAgBI,KAAhB;AACD,KAJQ;AAKTC,IAAAA,SALS,qBAKCN,KALD,EAKQK,KALR,EAKe;AACtBL,MAAAA,KAAK,CAACE,OAAN,GAAgBG,KAAhB;AACD;AAPQ,GAPE;AAkBbE,EAAAA,OAAO,EAAE;AAEDC,IAAAA,MAFC,kBAEMC,OAFN,EAEe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKGZ,KAAK,CAACa,IAAN,CAAYX,MAAM,GAAG,SAArB,EAAgCU,OAAO,CAACE,SAAR,CAAkBC,IAAlD,CALH;;AAAA;AAKdC,gBAAAA,QALc;AAMdC,gBAAAA,KANc,GAMND,QANM;;AAQlB,oBAAIC,KAAJ,EAAW;AAETC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BF,KAA5B;AACAhB,kBAAAA,IAAI,CAAC,SAAD,EAAY,4CAAZ,EAA0D,SAA1D,CAAJ;AAED,iBALD,MAKO;AAELA,kBAAAA,IAAI,CAAC,OAAD,EAAU,qCAAqCe,QAAQ,CAACD,IAAT,CAAcK,GAA7D,EAAkE,OAAlE,CAAJ;AAED;;AAjBiB;AAAA;;AAAA;AAAA;AAAA;AAqBhBnB,gBAAAA,IAAI,CAAC,OAAD,eAAc,OAAd,CAAJ;;AArBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBrB,KA3BM;AA6BDoB,IAAAA,MA7BC,kBA6BMT,OA7BN,EA6Be;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIGZ,KAAK,CAACa,IAAN,CAAYX,MAAM,GAAG,QAArB,EAA+BU,OAAO,CAACE,SAAR,CAAkBC,IAAjD,CAJH;;AAAA;AAIdC,gBAAAA,QAJc;AAMlBJ,gBAAAA,OAAO,CAACU,MAAR,CAAe,WAAf,EAA4B,IAA5B;AAEIL,gBAAAA,KARc,GAQND,QAAQ,CAACD,IAAT,CAAcE,KARR;AASlBC,gBAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BF,KAA5B;;AACA,oBAAIA,KAAJ,EAAW;AACThB,kBAAAA,IAAI,CAAC,SAAD,EAAY,kBAAZ,EAAgC,SAAhC,CAAJ;AACD;;AAZiB;AAAA;;AAAA;AAAA;AAAA;AAelBA,gBAAAA,IAAI,CAAC,OAAD,EAAU,iDAAV,EAAoD,OAApD,CAAJ;;AAfkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBrB,KA/CM;AAiDDsB,IAAAA,MAjDC,kBAiDMX,OAjDN,EAiDe;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpB,oBAAG;AAEDM,kBAAAA,YAAY,CAACM,UAAb,CAAwB,KAAxB;AACAZ,kBAAAA,OAAO,CAACU,MAAR,CAAe,WAAf,EAA4B,KAA5B;AACArB,kBAAAA,IAAI,CAAC,SAAD,EAAY,oBAAZ,EAAkC,SAAlC,CAAJ;AAED,iBAND,CAMC,OAAMwB,SAAN,EAAgB;AAEfxB,kBAAAA,IAAI,CAAC,OAAD,EAAU,kCAAV,EAA8C,OAA9C,CAAJ;AAED;;AAZmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAerB;AAhEM;AAlBI,CAAf","sourcesContent":["import axios from \"axios\";\n// import router from \"../../router\";\nimport swal from 'sweetalert';\n\nconst ApiUrl = \"http://localhost:8080/auth\"\n\nexport default {\n\n  state: {\n    isLogin: false,\n    isAdmin: false\n  },\n\n  mutations: {\n\n    SET_LOGIN(state, value) {\n      state.isLogin = value\n    },\n    SET_ADMIN(state, value) {\n      state.isAdmin = value\n    }\n\n  },\n\n  actions: {\n\n    async signup(context) {\n\n      \n      try {\n\n        let response = await axios.post( ApiUrl + \"/signup\", context.rootState.data );\n        let token = response;\n\n        if (token) {\n\n          localStorage.setItem(\"jwt\", token);\n          swal(\"Success\", \"Un Mail De verification vous a été envoyer\", \"success\");\n        \n        } else {\n          \n          swal(\"Error\", \"Quelque chose s'est mal passé : \" + response.data.err, \"error\");\n        \n        }\n\n      } catch (err) {\n\n          swal(\"Error\",err, \"error\");\n    \n      }\n\n    },\n\n    async signin(context) {\n      \n      try {\n\n        let response = await axios.post( ApiUrl + \"/login\", context.rootState.data);\n\n        context.commit(\"SET_LOGIN\", true)\n        \n        let token = response.data.token;\n        localStorage.setItem(\"jwt\", token);\n        if (token) {\n          swal(\"Success\", \"Connexion reussi\", \"success\");\n        }\n\n      } catch (err) {\n        swal(\"Error\", \"Quelque chose s'est mal passé : \" + err, \"error\");\n      }\n\n    },\n    \n    async logout(context) {\n\n      try{\n\n        localStorage.removeItem(\"jwt\");\n        context.commit(\"SET_LOGIN\", false)\n        swal(\"Success\", \"déconnexion réussi\", \"success\");\n\n      }catch(exception){\n\n        swal(\"Error\", \"Quelque chose s'est mal passé : \", \"error\");\n\n      }\n      \n\n    },\n  }\n}\n"]}]}