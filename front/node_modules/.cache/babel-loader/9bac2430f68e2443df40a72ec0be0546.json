{"remainingRequest":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/babel-loader/lib/index.js!/home/noydono/Documents/Git/WorldCraft/front/node_modules/eslint-loader/index.js??ref--13-0!/home/noydono/Documents/Git/WorldCraft/front/src/store/auth/auth.js","dependencies":[{"path":"/home/noydono/Documents/Git/WorldCraft/front/src/store/auth/auth.js","mtime":1619445982910},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvbm95ZG9uby9Eb2N1bWVudHMvR2l0L1dvcmxkQ3JhZnQvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOyAvLyBpbXBvcnQgcm91dGVyIGZyb20gIi4uLy4uL3JvdXRlciI7CgppbXBvcnQgc3dhbCBmcm9tICdzd2VldGFsZXJ0JzsKdmFyIEFwaVVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXV0aCI7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgaXNMb2dpbjogZmFsc2UsCiAgICBpc0FkbWluOiBmYWxzZQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfTE9HSU46IGZ1bmN0aW9uIFNFVF9MT0dJTihzdGF0ZSwgdmFsdWUpIHsKICAgICAgc3RhdGUuaXNMb2dpbiA9IHZhbHVlOwogICAgfSwKICAgIFNFVF9BRE1JTjogZnVuY3Rpb24gU0VUX0FETUlOKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5pc0FkbWluID0gdmFsdWU7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBzaWdudXA6IGZ1bmN0aW9uIHNpZ251cChjb250ZXh0KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlLCB0b2tlbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoQXBpVXJsICsgIi9zaWdudXAiLCBjb250ZXh0LnJvb3RTdGF0ZS5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgdG9rZW4gPSByZXNwb25zZS5kYXRhOwoKICAgICAgICAgICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgid29ybGRjcmFmdCIsIHRva2VuKTsKICAgICAgICAgICAgICAgICAgc3dhbCgiU3VjY2VzcyIsICJVbiBNYWlsIERlIHZlcmlmaWNhdGlvbiB2b3VzIGEgw6l0w6kgZW52b3llciIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzd2FsKCJFcnJvciIsICJRdWVscXVlIGNob3NlIHMnZXN0IG1hbCBwYXNzw6kgOiAiICsgcmVzcG9uc2UuZGF0YS5lcnIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBzd2FsKCJFcnJvciIsIF9jb250ZXh0LnQwLCAiZXJyb3IiKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbmluOiBmdW5jdGlvbiBzaWduaW4oY29udGV4dCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChBcGlVcmwgKyAiL2xvZ2luIiwgY29udGV4dC5yb290U3RhdGUuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgiU0VUX0xPR0lOIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB0b2tlbiA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgid29ybGRjcmFmdCIsIHRva2VuKTsKCiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICAgICAgc3dhbCgiU3VjY2VzcyIsICJDb25uZXhpb24gcmV1c3NpIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgc3dhbCgiRXJyb3IiLCAiUXVlbHF1ZSBjaG9zZSBzJ2VzdCBtYWwgcGFzc8OpIDogIiArIF9jb250ZXh0Mi50MCwgImVycm9yIik7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KGNvbnRleHQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ3b3JsZGNyYWZ0Iik7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCJTRVRfTE9HSU4iLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgIHN3YWwoIlN1Y2Nlc3MiLCAiZMOpY29ubmV4aW9uIHLDqXVzc2kiLCAic3VjY2VzcyIpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgIHN3YWwoIkVycm9yIiwgIlF1ZWxxdWUgY2hvc2Ugcydlc3QgbWFsIHBhc3PDqSA6ICIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/noydono/Documents/Git/WorldCraft/front/src/store/auth/auth.js"],"names":["axios","swal","ApiUrl","state","isLogin","isAdmin","mutations","SET_LOGIN","value","SET_ADMIN","actions","signup","context","post","rootState","data","response","token","localStorage","setItem","err","signin","commit","logout","removeItem","exception"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,YAAjB;AAEA,IAAMC,MAAM,GAAG,4BAAf;AAEA,eAAe;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAE,KADJ;AAELC,IAAAA,OAAO,EAAE;AAFJ,GAFM;AAObC,EAAAA,SAAS,EAAE;AAETC,IAAAA,SAFS,qBAECJ,KAFD,EAEQK,KAFR,EAEe;AACtBL,MAAAA,KAAK,CAACC,OAAN,GAAgBI,KAAhB;AACD,KAJQ;AAKTC,IAAAA,SALS,qBAKCN,KALD,EAKQK,KALR,EAKe;AACtBL,MAAAA,KAAK,CAACE,OAAN,GAAgBG,KAAhB;AACD;AAPQ,GAPE;AAkBbE,EAAAA,OAAO,EAAE;AAEDC,IAAAA,MAFC,kBAEMC,OAFN,EAEe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKGZ,KAAK,CAACa,IAAN,CAAYX,MAAM,GAAG,SAArB,EAAgCU,OAAO,CAACE,SAAR,CAAkBC,IAAlD,CALH;;AAAA;AAKdC,gBAAAA,QALc;AAMdC,gBAAAA,KANc,GAMND,QAAQ,CAACD,IANH;;AAQlB,oBAAIE,KAAJ,EAAW;AAETC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCF,KAAnC;AACAhB,kBAAAA,IAAI,CAAC,SAAD,EAAY,4CAAZ,EAA0D,SAA1D,CAAJ;AAED,iBALD,MAKO;AAELA,kBAAAA,IAAI,CAAC,OAAD,EAAU,qCAAqCe,QAAQ,CAACD,IAAT,CAAcK,GAA7D,EAAkE,OAAlE,CAAJ;AAED;;AAjBiB;AAAA;;AAAA;AAAA;AAAA;AAqBhBnB,gBAAAA,IAAI,CAAC,OAAD,eAAc,OAAd,CAAJ;;AArBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBrB,KA3BM;AA6BDoB,IAAAA,MA7BC,kBA6BMT,OA7BN,EA6Be;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAIGZ,KAAK,CAACa,IAAN,CAAYX,MAAM,GAAG,QAArB,EAA+BU,OAAO,CAACE,SAAR,CAAkBC,IAAjD,CAJH;;AAAA;AAIdC,gBAAAA,QAJc;AAKlBJ,gBAAAA,OAAO,CAACU,MAAR,CAAe,WAAf,EAA4B,IAA5B;AAEIL,gBAAAA,KAPc,GAOND,QAAQ,CAACD,IAPH;AASlBG,gBAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCF,KAAnC;;AACA,oBAAIA,KAAJ,EAAW;AACThB,kBAAAA,IAAI,CAAC,SAAD,EAAY,kBAAZ,EAAgC,SAAhC,CAAJ;AACD;;AAZiB;AAAA;;AAAA;AAAA;AAAA;AAelBA,gBAAAA,IAAI,CAAC,OAAD,EAAU,iDAAV,EAAoD,OAApD,CAAJ;;AAfkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBrB,KA/CM;AAiDDsB,IAAAA,MAjDC,kBAiDMX,OAjDN,EAiDe;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpB,oBAAG;AAEDM,kBAAAA,YAAY,CAACM,UAAb,CAAwB,YAAxB;AACAZ,kBAAAA,OAAO,CAACU,MAAR,CAAe,WAAf,EAA4B,KAA5B;AACArB,kBAAAA,IAAI,CAAC,SAAD,EAAY,oBAAZ,EAAkC,SAAlC,CAAJ;AAED,iBAND,CAMC,OAAMwB,SAAN,EAAgB;AAEfxB,kBAAAA,IAAI,CAAC,OAAD,EAAU,kCAAV,EAA8C,OAA9C,CAAJ;AAED;;AAZmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAerB;AAhEM;AAlBI,CAAf","sourcesContent":["import axios from \"axios\";\n// import router from \"../../router\";\nimport swal from 'sweetalert';\n\nconst ApiUrl = \"http://localhost:8080/auth\"\n\nexport default {\n\n  state: {\n    isLogin: false,\n    isAdmin: false\n  },\n\n  mutations: {\n\n    SET_LOGIN(state, value) {\n      state.isLogin = value\n    },\n    SET_ADMIN(state, value) {\n      state.isAdmin = value\n    }\n\n  },\n\n  actions: {\n\n    async signup(context) {\n\n      \n      try {\n\n        let response = await axios.post( ApiUrl + \"/signup\", context.rootState.data );\n        let token = response.data;\n\n        if (token) {\n\n          localStorage.setItem(\"worldcraft\", token);\n          swal(\"Success\", \"Un Mail De verification vous a été envoyer\", \"success\");\n        \n        } else {\n          \n          swal(\"Error\", \"Quelque chose s'est mal passé : \" + response.data.err, \"error\");\n        \n        }\n\n      } catch (err) {\n\n          swal(\"Error\",err, \"error\");\n    \n      }\n\n    },\n\n    async signin(context) {\n      \n      try {\n\n        let response = await axios.post( ApiUrl + \"/login\", context.rootState.data);\n        context.commit(\"SET_LOGIN\", true)\n        \n        let token = response.data;\n\n        localStorage.setItem(\"worldcraft\", token);\n        if (token) {\n          swal(\"Success\", \"Connexion reussi\", \"success\");\n        }\n\n      } catch (err) {\n        swal(\"Error\", \"Quelque chose s'est mal passé : \" + err, \"error\");\n      }\n\n    },\n    \n    async logout(context) {\n\n      try{\n\n        localStorage.removeItem(\"worldcraft\");\n        context.commit(\"SET_LOGIN\", false)\n        swal(\"Success\", \"déconnexion réussi\", \"success\");\n\n      }catch(exception){\n\n        swal(\"Error\", \"Quelque chose s'est mal passé : \", \"error\");\n\n      }\n      \n\n    },\n  }\n}\n"]}]}