{"remainingRequest":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/noydono/Documents/Git/WorldCraft/front/src/views/Sujet_view.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/noydono/Documents/Git/WorldCraft/front/src/views/Sujet_view.vue","mtime":1619445364305},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFZ1ZUp3dERlY29kZSBmcm9tICJ2dWUtand0LWRlY29kZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmV3UmVwb25zZToge30sCiAgICAgIGl0ZW06IDUsCiAgICAgIHBhZ2luYXRpb246IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIHJvd3NQZXJQYWdlOiAxMCwKICAgICAgfSwKICAgICAgbmV3czogZmFsc2UsCiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFN1amV0QnlJZCh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgdGhpcy5nZXRSZXBvbnNlcyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKFsiU0VUX0RBVEEiXSksCiAgICAuLi5tYXBBY3Rpb25zKFsiZ2V0U3VqZXRCeUlkIiwgInNldFJlcG9uc2UiLCAiZ2V0UmVwb25zZXMiXSksCgogICAgX3NldEZvcm0oKSB7CiAgICAgIGxldCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ3b3JsZGNyYWZ0Iik7CiAgICAgIGlmICh0b2tlbikgewogICAgICAgIGxldCBkZWNvZGVkID0gVnVlSnd0RGVjb2RlLmRlY29kZSh0b2tlbik7CiAgICAgICAgdGhpcy5uZXdSZXBvbnNlLmF1dGhvciA9IGRlY29kZWQucHNldWRvOwogICAgICB9CiAgICAgIHRoaXMubmV3UmVwb25zZS5zdWpldF9pZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgdGhpcy5TRVRfREFUQSh0aGlzLm5ld1JlcG9uc2UpOwogICAgfSwKCiAgICBzdWJtaXRSZXBvbnNlKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuc2V0UmVwb25zZSgpOwogICAgICB0aGlzLm5ld1JlcG9uc2UgPSB7fTsKICAgICAgdGhpcy5nZXRSZXBvbnNlcyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgICB0aGlzLlNFVF9EQVRBKCk7CiAgICB9LAoKICAgIGRhdGUoZGF0ZSkgewogICAgICBsZXQgZCA9IG5ldyBEYXRlKGRhdGUpOwogICAgICBsZXQgbSA9IG1vbWVudChkKTsKICAgICAgbW9tZW50LnVwZGF0ZUxvY2FsZSgiZW4iLCB7CiAgICAgICAgcmVsYXRpdmVUaW1lOiB7CiAgICAgICAgICBmdXR1cmU6ICJkYW5zICVzIiwKICAgICAgICAgIHBhc3Q6ICIgaWwgeSBhICVzIiwKICAgICAgICAgIHM6ICJxdWVscXVlcyBzZWNvbmRlcyIsCiAgICAgICAgICBzczogIiVkIHNlY29uZGVzIiwKICAgICAgICAgIG06ICJ1bmUgbWludXRlIiwKICAgICAgICAgIG1tOiAiJWQgbWludXRlIiwKICAgICAgICAgIGg6ICJ1bmUgaGV1cmUiLAogICAgICAgICAgaGg6ICIlZCBoZXVyZSIsCiAgICAgICAgICBkOiAidW4gam91ciIsCiAgICAgICAgICBkZDogIiVkIGpvdXIiLAogICAgICAgICAgdzogInVuZSBzZW1haW5lIiwKICAgICAgICAgIHd3OiAiJWQgc2VtYWluZSIsCiAgICAgICAgICBNOiAidW4gbW9pcyIsCiAgICAgICAgICBNTTogIiVkIG1vaXMiLAogICAgICAgICAgeTogInVuZSBhbm7DqWUiLAogICAgICAgICAgeXk6ICIlZCBhbm7DqWUiLAogICAgICAgIH0sCiAgICAgIH0pOwogICAgICByZXR1cm4gbS5mcm9tTm93KCk7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsKICAgICAgc3VqZXQ6IChzdGF0ZSkgPT4gc3RhdGUuc3VqZXQuc3VqZXQsCiAgICAgIGlzTG9naW46IChzdGF0ZSkgPT4gc3RhdGUuYXV0aC5pc0xvZ2luLAogICAgICByZXBvbnNlczogKHN0YXRlKSA9PiBzdGF0ZS5yZXBvbnNlLnJlcG9uc2VzLAogICAgfSksCgogICAgcGFnZXMoKSB7CiAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5yZXBvbnNlcy5sZW5ndGggLyB0aGlzLnBhZ2luYXRpb24ucm93c1BlclBhZ2UpOwogICAgfSwKCiAgICBjbG9uZUl0ZW1zKCkgewogICAgICB2YXIgY2xvbmUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucmVwb25zZXMpKTsKICAgICAgdmFyIHN0YXJ0RnJvbSA9CiAgICAgICAgdGhpcy5wYWdpbmF0aW9uLnBhZ2UgKiB0aGlzLnBhZ2luYXRpb24ucm93c1BlclBhZ2UgLQogICAgICAgIHRoaXMucGFnaW5hdGlvbi5yb3dzUGVyUGFnZTsKICAgICAgcmV0dXJuIGNsb25lLnNwbGljZShzdGFydEZyb20sIHRoaXMucGFnaW5hdGlvbi5yb3dzUGVyUGFnZSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Sujet_view.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Sujet_view.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container class=\"\">\n    <h2 class=\"display-3 mb-3\"></h2>\n\n    <v-card class=\"mb-9\" style=\"border: 1px solid grey\">\n      <v-card-title\n        class=\"blue-grey lighten-3\"\n        style=\"height: 55px; padding: 0 0 0 30px !important\"\n      >\n        {{ sujet.title }}\n\n        <span class=\"subtitle-2 ml-auto mr-3\">{{\n          date(sujet.created_at)\n        }}</span>\n      </v-card-title>\n      <v-card-text style=\"padding: 0 12px 0 12px !important\">\n        <v-row>\n          <v-col\n            style=\"\n              height: 100%;\n              border-top: 1px solid grey;\n              border-right: 1px solid grey;\n            \"\n            md=\"2\"\n            class=\"d-flex flex-column align-center justify-center\"\n          >\n            <span>{{ sujet.author }}</span>\n            <v-avatar class=\"mt-2\" color=\"orange\" size=\"62\">\n              <span class=\"white--text headline\">62</span>\n            </v-avatar>\n            <span class=\"mt-2\">Builder</span>\n            <span class=\"mt-2\"> <strong>date : </strong> 6/12/21212 </span>\n            <span> <strong>post</strong> : 1212</span>\n          </v-col>\n          <v-col\n            style=\"height: 100%; border-top: 1px solid grey\"\n            md=\"10\"\n            class=\"\"\n          >\n            <h2></h2>\n            <p class=\"mt-5 text-justify\">\n              {{ sujet.content }}\n            </p>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n\n    <h3>Reponse :</h3>\n\n    <v-row class=\"underline\"> </v-row>\n\n    <v-card\n      v-for=\"(reponse, key) in cloneItems\"\n      :key=\"key\"\n      class=\"reponse-card mt-7\"\n    >\n      <v-card-title class=\"blue-grey lighten-3 subtitle-2 reponse-card-title\">\n        <span class=\"subtitle-2 ml-auto mr-3\">{{\n          date(reponse.created_at)\n        }}</span>\n      </v-card-title>\n      <v-card-text style=\"padding: 0 12px 0 12px !important\">\n        <v-row>\n          <v-col\n            md=\"2\"\n            class=\"d-flex flex-column align-center justify-center reponse-card-col-author\"\n          >\n            <span>{{ reponse.author }}</span>\n            <v-avatar class=\"mt-2\" color=\"orange\" size=\"62\">\n              <span class=\"white--text headline\">62</span>\n            </v-avatar>\n            <span class=\"mt-2\">Builder</span>\n            <span class=\"mt-2\"> <strong>date : </strong> 6/12/21212 </span>\n            <span> <strong>post</strong> : 1212</span>\n          </v-col>\n          <v-col md=\"10\" class=\"reponse-card-col-content\">\n            <p class=\"mt-5 ml-5 text-justify\">\n              {{ reponse.content }}\n            </p>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n\n    <v-pagination\n      v-if=\"reponses.length >= pagination.rowsPerPage\"\n      v-model=\"pagination.page\"\n      :length=\"pages\"\n      circle\n      color=\"light-green darken-1\"\n      class=\"mt-4\"\n    ></v-pagination>\n\n    <form @submit=\"submitReponse\">\n      <v-card\n        v-if=\"isLogin === true\"\n        class=\"mt-5 d-flex flex-column align-center justify-center\"\n      >\n        <v-card-title>\n          <span>Ajoute ta réponse</span>\n        </v-card-title>\n        <v-card-text style=\"width: 500px\">\n          <v-textarea\n            v-model=\"newReponse.content\"\n            outlined\n            label=\"Commenter\"\n            value\n            class=\"mt-5\"\n          ></v-textarea>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn @click=\"_setForm()\" type=\"submit\" class=\"float-right mb-5 mr-5\"\n            >envoyer</v-btn\n          >\n        </v-card-actions>\n      </v-card>\n      <v-card\n        class=\"mt-5 d-flex flex-column align-center justify-center\"\n        v-if=\"isLogin === false\"\n      >\n        <v-card-text> connect toi pour commenter </v-card-text>\n      </v-card>\n    </form>\n  </v-container>\n</template>\n          \n<script>\nimport { mapActions, mapState, mapMutations } from \"vuex\";\nimport VueJwtDecode from \"vue-jwt-decode\";\nimport moment from \"moment\";\n\nexport default {\n  data() {\n    return {\n      newReponse: {},\n      item: 5,\n      pagination: {\n        page: 1,\n        rowsPerPage: 10,\n      },\n      news: false,\n    };\n  },\n\n  created() {\n    this.getSujetById(this.$route.params.id);\n    this.getReponses(this.$route.params.id);\n  },\n  methods: {\n    ...mapMutations([\"SET_DATA\"]),\n    ...mapActions([\"getSujetById\", \"setReponse\", \"getReponses\"]),\n\n    _setForm() {\n      let token = localStorage.getItem(\"worldcraft\");\n      if (token) {\n        let decoded = VueJwtDecode.decode(token);\n        this.newReponse.author = decoded.pseudo;\n      }\n      this.newReponse.sujet_id = this.$route.params.id;\n      this.SET_DATA(this.newReponse);\n    },\n\n    submitReponse(event) {\n      event.preventDefault();\n      this.setReponse();\n      this.newReponse = {};\n      this.getReponses(this.$route.params.id);\n      this.SET_DATA();\n    },\n\n    date(date) {\n      let d = new Date(date);\n      let m = moment(d);\n      moment.updateLocale(\"en\", {\n        relativeTime: {\n          future: \"dans %s\",\n          past: \" il y a %s\",\n          s: \"quelques secondes\",\n          ss: \"%d secondes\",\n          m: \"une minute\",\n          mm: \"%d minute\",\n          h: \"une heure\",\n          hh: \"%d heure\",\n          d: \"un jour\",\n          dd: \"%d jour\",\n          w: \"une semaine\",\n          ww: \"%d semaine\",\n          M: \"un mois\",\n          MM: \"%d mois\",\n          y: \"une année\",\n          yy: \"%d année\",\n        },\n      });\n      return m.fromNow();\n    },\n  },\n  computed: {\n    ...mapState({\n      sujet: (state) => state.sujet.sujet,\n      isLogin: (state) => state.auth.isLogin,\n      reponses: (state) => state.reponse.reponses,\n    }),\n\n    pages() {\n      return Math.ceil(this.reponses.length / this.pagination.rowsPerPage);\n    },\n\n    cloneItems() {\n      var clone = JSON.parse(JSON.stringify(this.reponses));\n      var startFrom =\n        this.pagination.page * this.pagination.rowsPerPage -\n        this.pagination.rowsPerPage;\n      return clone.splice(startFrom, this.pagination.rowsPerPage);\n    },\n  },\n};\n</script>\n\n<style lang=\"sass\" scoped>\n.author\n  text-decoration: none\n  &:hover\n    text-decoration: underline\n\n.reponse-author\n  border-right: 1px solid #919191\n\n.reponse-citation\n  overflow-wrap: anywhere\n\n.underline\n  padding: 1px\n  background-color: grey\n\n.reponse-card-col-content\n  height: 100%\n  border-top: 1px solid grey\n\n.reponse-card-col-author\n  height: 100%\n  border-top: 1px solid grey\n  border-right: 1px solid grey\n\n.reponse-card-title\n  height: 55px\n  padding: 0 0 0 30px !important\n\n.reponse-card\n  border: 1px solid grey\n</style>"]}]}