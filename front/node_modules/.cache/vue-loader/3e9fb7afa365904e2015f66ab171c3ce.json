{"remainingRequest":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/noydono/Documents/Git/WorldCraft/front/src/components/global/createSujetComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/noydono/Documents/Git/WorldCraft/front/src/components/global/createSujetComponent.vue","mtime":1619445811325},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/noydono/Documents/Git/WorldCraft/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwQWN0aW9ucywgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFZ1ZUp3dERlY29kZSBmcm9tICJ2dWUtand0LWRlY29kZSI7CgpleHBvcnQgZGVmYXVsdCB7CgogIGRhdGE6ICgpID0+ICh7CiAgICBuZXdTdWpldDoge30sCiAgICBkaWFsb2c6IGZhbHNlLAogICAgc2VsZWN0Q2F0ZWdvcmllOiBmYWxzZSwKICB9KSwKCiAgY3JlYXRlZCgpIHsKCiAgICB0aGlzLmdldENhdGVnb3JpZSgpOwogICAgdGhpcy5nZXRTZWN0aW9ucygpOwoKICB9LAoKICBtZXRob2RzOiB7CgogICAgLi4ubWFwTXV0YXRpb25zKFsiU0VUX0RBVEEiXSksCiAgICAuLi5tYXBBY3Rpb25zKFsiZ2V0Q2F0ZWdvcmllIiwgImdldFNlY3Rpb25zIiwgInNldFN1amV0Il0pLAoKICAgIF9zZXRGb3JtKCkgewogICAgICAgIGxldCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ3b3JsZGNyYWZ0Iik7CiAgICAgICAgaWYodG9rZW4pewogICAgICAgICAgbGV0IGRlY29kZWQgPSBWdWVKd3REZWNvZGUuZGVjb2RlKHRva2VuKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGRlY29kZWQpOwogICAgICAgICAgdGhpcy5uZXdTdWpldC5hdXRob3IgPSBkZWNvZGVkLnBzZXVkbwogICAgICAgIH0gICAgICAgIAogICAgICAgIHRoaXMuU0VUX0RBVEEodGhpcy5uZXdTdWpldCk7CiAgICB9LAoKICAgIGZvcm1hdFRhZygpeyAgCiAgICAgICAgbGV0IGFycmF5VGFnID0gW107CiAgICAgICAgYXJyYXlUYWcgPSB0aGlzLm5ld1N1amV0LnRhZy5zcGxpdCgiICIgfHwgIiAjICIpOwogICAgICAgIHRoaXMubmV3U3VqZXQudGFnID0gYXJyYXlUYWc7CiAgICB9LAoKICAgIHN1Ym1pdFN1amV0KGV2ZW50KSB7CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuc2V0U3VqZXQoKTsKICAgIH0sCgogICAgZmlsdGVyU21hbGxDYXRlZ29yaWUoY2F0ZWdvcmllSUQpIHsKICAgICAgdmFyIGFycmF5Q2F0ID0gW107CiAgICAgIHRoaXMuc2VjdGlvbnMuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGlmIChjYXRlZ29yaWVJRCA9PT0gaXRlbS5jYXRlZ29yaWVfaWQpIHsKICAgICAgICAgIGFycmF5Q2F0LnB1c2goaXRlbSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGFycmF5Q2F0OwogICAgfSwKCiAgICBTZWxlY3RDYXRlZ29yaWUoaWQpIHsKICAgICAgdGhpcy5uZXdTdWpldC5zZWN0aW9uX2lkID0gaWQ7CiAgICAgIHRoaXMuc2VsZWN0Q2F0ZWdvcmllID0gdHJ1ZTsKICAgIH0sCgogICAgcmV0b3VyKCkgewogICAgICB0aGlzLm5ld1N1amV0LnNlY3Rpb25faWQgPSBudWxsOwogICAgICB0aGlzLnNlbGVjdENhdGVnb3JpZSA9IGZhbHNlOwogICAgfSwKCiAgfSwKCiAgY29tcHV0ZWQ6IHsKCiAgICAuLi5tYXBTdGF0ZSh7CiAgICAgIGNhdGVnb3JpZXM6IHN0YXRlID0+IHN0YXRlLmNhdGVnb3JpZS5jYXRlZ29yaWVzLCAKICAgICAgc2VjdGlvbnM6IHN0YXRlID0+IHN0YXRlLnNlY3Rpb24uc2VjdGlvbnMKICAgICAgfSksCgogIH0sCn07Cgo="},{"version":3,"sources":["createSujetComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"createSujetComponent.vue","sourceRoot":"src/components/global","sourcesContent":["<template>\n  <v-dialog \n    v-model=\"dialog\" \n    persistent \n    max-width=\"600\"\n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-btn \n        class=\"mt-2\" \n        text \n        v-bind=\"attrs\" \n        v-on=\"on\"\n      > Crée un sujet </v-btn>\n    </template>\n\n    <!-- crud Sujet récuperation de l'id de la catégorie -->\n    <v-card v-if=\"selectCategorie == false\">\n      <v-card-title>\n        <h3>Choisir une categorie</h3>\n        <i \n          @click=\"dialog = false\" \n          class=\"fas fa-times ml-auto\"\n        ></i>\n      </v-card-title>\n\n      <v-list width=\"100%\">\n        <v-list-group\n          v-for=\"(categorie, key) in categories\"\n          :key=\"key\"\n          no-action\n        >\n          <template v-slot:activator>\n            <v-list-item-content>\n              <h1 \n                style=\"font-size: 20px\" \n                v-text=\"categorie.name\"\n              ></h1>\n            </v-list-item-content>\n          </template>\n\n          <v-list-item\n            v-for=\"(section, key) in filterSmallCategorie(\n              categorie._id\n            )\"\n            :key=\"key\"\n            @click=\"SelectCategorie(section._id)\"\n          >\n            <v-list-item-icon class=\"mt-6 grey--text text--darken-2\">\n              <v-icon\n                v-text=\"section.icon\"\n                style=\"font-size: 30px\"\n              ></v-icon>\n            </v-list-item-icon>\n            <v-list-item-content>\n              <div class=\"d-flex flex-row justify-start align-start\">\n                <div\n                  class=\"subtitle-1 mt-1 grey--text text--darken-4\"\n                  v-text=\"section.name\"\n                ></div>\n                <!-- <v-chip x-small class=\"ma-2 grey\"> nouveaux </v-chip> -->\n              </div>\n\n              <v-list-item-title\n                class=\"subtitle-2 grey--text\"\n                v-text=\"section.description\"\n              ></v-list-item-title>\n            </v-list-item-content>\n\n          </v-list-item>\n        </v-list-group>\n      </v-list>\n    </v-card>\n\n    <!-- crud SUjet récuperation du titre, déscritpion, tag -->\n    <v-card v-if=\"selectCategorie == true\">\n      <form @submit=\"submitSujet\">\n        <v-card-title>\n          <h3>Creation de sujet</h3>\n          <i \n            @click=\"dialog = false\" \n            class=\"fas fa-times ml-auto\"\n          ></i>\n        </v-card-title>\n\n        <v-card-text>\n          <v-text-field\n            v-model=\"newSujet.title\"\n            label=\"Titre du sujet\"\n            @change=\"_setForm()\"\n          ></v-text-field>\n          <v-textarea\n            outlined\n            v-model=\"newSujet.content\"\n            name=\"input-7-4\"\n            label=\"description de la sujet\"\n            value=\"newSujet.description\"\n          ></v-textarea>\n          <v-text-field\n            v-model=\"newSujet.tag\"\n            label=\"Tag du sujet\"\n            @change=\"formatTag()\"\n          ></v-text-field>\n        </v-card-text>\n\n        <v-card-actions>\n          <v-btn \n            color=\"green darken-1\" \n            @click=\"retour()\"\n          >Annuler</v-btn>\n          <v-btn \n            class=\"mr-auto\" \n            @click=\"_setForm()\" \n            type=\"submit\"\n          >Suivant</v-btn>\n        </v-card-actions>\n      </form>\n    </v-card>\n\n  </v-dialog>\n</template>\n\n<script>\nimport { mapMutations, mapActions, mapState } from \"vuex\";\nimport VueJwtDecode from \"vue-jwt-decode\";\n\nexport default {\n\n  data: () => ({\n    newSujet: {},\n    dialog: false,\n    selectCategorie: false,\n  }),\n\n  created() {\n\n    this.getCategorie();\n    this.getSections();\n\n  },\n\n  methods: {\n\n    ...mapMutations([\"SET_DATA\"]),\n    ...mapActions([\"getCategorie\", \"getSections\", \"setSujet\"]),\n\n    _setForm() {\n        let token = localStorage.getItem(\"worldcraft\");\n        if(token){\n          let decoded = VueJwtDecode.decode(token);\n          console.log(decoded);\n          this.newSujet.author = decoded.pseudo\n        }        \n        this.SET_DATA(this.newSujet);\n    },\n\n    formatTag(){  \n        let arrayTag = [];\n        arrayTag = this.newSujet.tag.split(\" \" || \" # \");\n        this.newSujet.tag = arrayTag;\n    },\n\n    submitSujet(event) {\n      this.dialog = false;\n      event.preventDefault();\n      this.setSujet();\n    },\n\n    filterSmallCategorie(categorieID) {\n      var arrayCat = [];\n      this.sections.forEach((item) => {\n        if (categorieID === item.categorie_id) {\n          arrayCat.push(item);\n        }\n      });\n      return arrayCat;\n    },\n\n    SelectCategorie(id) {\n      this.newSujet.section_id = id;\n      this.selectCategorie = true;\n    },\n\n    retour() {\n      this.newSujet.section_id = null;\n      this.selectCategorie = false;\n    },\n\n  },\n\n  computed: {\n\n    ...mapState({\n      categories: state => state.categorie.categories, \n      sections: state => state.section.sections\n      }),\n\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n.fas {\n  cursor: pointer;\n  transition: 0.5s;\n  &:hover {\n    transform: rotate(90deg);\n  }\n}\n</style>"]}]}