"use strict";function cov_1schraav8g(){var path="/home/noydono/Documents/Git/WorldCraft/app/middleware/updateValidator.js";var hash="695ee7de7f6398e2326f10a634758e75f05387a5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/noydono/Documents/Git/WorldCraft/app/middleware/updateValidator.js",statementMap:{"0":{start:{line:3,column:0},end:{line:70,column:2}},"1":{start:{line:4,column:20},end:{line:4,column:25}},"2":{start:{line:5,column:17},end:{line:5,column:19}},"3":{start:{line:6,column:4},end:{line:6,column:40}},"4":{start:{line:7,column:4},end:{line:7,column:34}},"5":{start:{line:9,column:4},end:{line:13,column:5}},"6":{start:{line:11,column:8},end:{line:11,column:44}},"7":{start:{line:15,column:4},end:{line:21,column:5}},"8":{start:{line:16,column:8},end:{line:18,column:11}},"9":{start:{line:20,column:8},end:{line:20,column:14}},"10":{start:{line:24,column:30},end:{line:24,column:55}},"11":{start:{line:25,column:8},end:{line:35,column:9}},"12":{start:{line:26,column:12},end:{line:28,column:15}},"13":{start:{line:29,column:12},end:{line:29,column:29}},"14":{start:{line:30,column:15},end:{line:35,column:9}},"15":{start:{line:31,column:12},end:{line:33,column:15}},"16":{start:{line:34,column:12},end:{line:34,column:29}},"17":{start:{line:39,column:29},end:{line:39,column:63}},"18":{start:{line:40,column:8},end:{line:50,column:9}},"19":{start:{line:41,column:12},end:{line:43,column:15}},"20":{start:{line:44,column:12},end:{line:44,column:29}},"21":{start:{line:45,column:15},end:{line:50,column:9}},"22":{start:{line:46,column:12},end:{line:48,column:15}},"23":{start:{line:49,column:12},end:{line:49,column:29}},"24":{start:{line:54,column:32},end:{line:54,column:96}},"25":{start:{line:55,column:8},end:{line:67,column:9}},"26":{start:{line:56,column:12},end:{line:58,column:15}},"27":{start:{line:59,column:12},end:{line:59,column:29}},"28":{start:{line:60,column:15},end:{line:67,column:9}},"29":{start:{line:63,column:12},end:{line:65,column:15}},"30":{start:{line:66,column:12},end:{line:66,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:37},end:{line:70,column:1}},line:3},"1":{name:"usernameValidator",decl:{start:{line:23,column:13},end:{line:23,column:30}},loc:{start:{line:23,column:41},end:{line:36,column:5}},line:23},"2":{name:"emailValidator",decl:{start:{line:38,column:13},end:{line:38,column:27}},loc:{start:{line:38,column:35},end:{line:51,column:5}},line:38},"3":{name:"passwordValidator",decl:{start:{line:53,column:13},end:{line:53,column:30}},loc:{start:{line:53,column:41},end:{line:68,column:5}},line:53}},branchMap:{"0":{loc:{start:{line:9,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:13,column:5}},{start:{line:9,column:4},end:{line:13,column:5}}],line:9},"1":{loc:{start:{line:15,column:4},end:{line:21,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:21,column:5}},{start:{line:15,column:4},end:{line:21,column:5}}],line:15},"2":{loc:{start:{line:25,column:8},end:{line:35,column:9}},type:"if",locations:[{start:{line:25,column:8},end:{line:35,column:9}},{start:{line:25,column:8},end:{line:35,column:9}}],line:25},"3":{loc:{start:{line:30,column:15},end:{line:35,column:9}},type:"if",locations:[{start:{line:30,column:15},end:{line:35,column:9}},{start:{line:30,column:15},end:{line:35,column:9}}],line:30},"4":{loc:{start:{line:40,column:8},end:{line:50,column:9}},type:"if",locations:[{start:{line:40,column:8},end:{line:50,column:9}},{start:{line:40,column:8},end:{line:50,column:9}}],line:40},"5":{loc:{start:{line:45,column:15},end:{line:50,column:9}},type:"if",locations:[{start:{line:45,column:15},end:{line:50,column:9}},{start:{line:45,column:15},end:{line:50,column:9}}],line:45},"6":{loc:{start:{line:55,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:55,column:8},end:{line:67,column:9}},{start:{line:55,column:8},end:{line:67,column:9}}],line:55},"7":{loc:{start:{line:60,column:15},end:{line:67,column:9}},type:"if",locations:[{start:{line:60,column:15},end:{line:67,column:9}},{start:{line:60,column:15},end:{line:67,column:9}}],line:60}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"695ee7de7f6398e2326f10a634758e75f05387a5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1schraav8g=function(){return actualCoverage;};}return actualCoverage;}cov_1schraav8g();cov_1schraav8g().s[0]++;module.exports=(req,res,next)=>{cov_1schraav8g().f[0]++;let hasErrors=(cov_1schraav8g().s[1]++,false);let errors=(cov_1schraav8g().s[2]++,[]);cov_1schraav8g().s[3]++;usernameValidator(req.body.username);cov_1schraav8g().s[4]++;emailValidator(req.body.email);cov_1schraav8g().s[5]++;if(req.body.isActive===true){cov_1schraav8g().b[0][0]++;cov_1schraav8g().s[6]++;passwordValidator(req.body.password);}else{cov_1schraav8g().b[0][1]++;}cov_1schraav8g().s[7]++;if(hasErrors===true){cov_1schraav8g().b[1][0]++;cov_1schraav8g().s[8]++;res.status(422).json({errors:errors});}else{cov_1schraav8g().b[1][1]++;cov_1schraav8g().s[9]++;next();}function usernameValidator(username){cov_1schraav8g().f[1]++;const patternPseudo=(cov_1schraav8g().s[10]++,/^([a-zA-Z0-9-_]{2,36})$/);cov_1schraav8g().s[11]++;if(!username){cov_1schraav8g().b[2][0]++;cov_1schraav8g().s[12]++;errors.push({username:"Le pseudo et requis"});cov_1schraav8g().s[13]++;hasErrors=true;}else{cov_1schraav8g().b[2][1]++;cov_1schraav8g().s[14]++;if(patternPseudo.test(username)===false){cov_1schraav8g().b[3][0]++;cov_1schraav8g().s[15]++;errors.push({username:"Pseudo non valide"});cov_1schraav8g().s[16]++;hasErrors=true;}else{cov_1schraav8g().b[3][1]++;}}};function emailValidator(email){cov_1schraav8g().f[2]++;const patternEmail=(cov_1schraav8g().s[17]++,/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/);cov_1schraav8g().s[18]++;if(!email){cov_1schraav8g().b[4][0]++;cov_1schraav8g().s[19]++;errors.push({email:"L'email et requis"});cov_1schraav8g().s[20]++;hasErrors=true;}else{cov_1schraav8g().b[4][1]++;cov_1schraav8g().s[21]++;if(patternEmail.test(email)===false){cov_1schraav8g().b[5][0]++;cov_1schraav8g().s[22]++;errors.push({email:"Email non valide"});cov_1schraav8g().s[23]++;hasErrors=true;}else{cov_1schraav8g().b[5][1]++;}}};function passwordValidator(password){cov_1schraav8g().f[3]++;const patternPassword=(cov_1schraav8g().s[24]++,/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/);cov_1schraav8g().s[25]++;if(!password){cov_1schraav8g().b[6][0]++;cov_1schraav8g().s[26]++;errors.push({password:"Le password et requis"});cov_1schraav8g().s[27]++;hasErrors=true;}else{cov_1schraav8g().b[6][1]++;cov_1schraav8g().s[28]++;if(patternPassword.test(password)===false){cov_1schraav8g().b[7][0]++;cov_1schraav8g().s[29]++;errors.push({password:"Password non valide"});cov_1schraav8g().s[30]++;hasErrors=true;}else{cov_1schraav8g().b[7][1]++;}}};};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZVZhbGlkYXRvci5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicmVxIiwicmVzIiwibmV4dCIsImhhc0Vycm9ycyIsImVycm9ycyIsInVzZXJuYW1lVmFsaWRhdG9yIiwiYm9keSIsInVzZXJuYW1lIiwiZW1haWxWYWxpZGF0b3IiLCJlbWFpbCIsImlzQWN0aXZlIiwicGFzc3dvcmRWYWxpZGF0b3IiLCJwYXNzd29yZCIsInN0YXR1cyIsImpzb24iLCJwYXR0ZXJuUHNldWRvIiwicHVzaCIsInRlc3QiLCJwYXR0ZXJuRW1haWwiLCJwYXR0ZXJuUGFzc3dvcmQiXSwibWFwcGluZ3MiOiJBQUFBLGEsc3JKQWVZO21IQWJaQSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsQ0FBQ0MsR0FBRCxDQUFNQyxHQUFOLENBQVdDLElBQVgsR0FBb0IseUJBQ2pDLEdBQUlDLENBQUFBLFNBQVMsMEJBQUcsS0FBSCxDQUFiLENBQ0EsR0FBSUMsQ0FBQUEsTUFBTSwwQkFBRyxFQUFILENBQVYsQ0FGaUMsd0JBR2pDQyxpQkFBaUIsQ0FBQ0wsR0FBRyxDQUFDTSxJQUFKLENBQVNDLFFBQVYsQ0FBakIsQ0FIaUMsd0JBSWpDQyxjQUFjLENBQUNSLEdBQUcsQ0FBQ00sSUFBSixDQUFTRyxLQUFWLENBQWQsQ0FKaUMsd0JBTWpDLEdBQUlULEdBQUcsQ0FBQ00sSUFBSixDQUFTSSxRQUFULEdBQXNCLElBQTFCLENBQWdDLG9EQUU1QkMsaUJBQWlCLENBQUNYLEdBQUcsQ0FBQ00sSUFBSixDQUFTTSxRQUFWLENBQWpCLENBRUgsQ0FKRCxpQ0FOaUMsd0JBWWpDLEdBQUlULFNBQVMsR0FBSyxJQUFsQixDQUF3QixvREFDcEJGLEdBQUcsQ0FBQ1ksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ2pCVixNQUFNLENBQUVBLE1BRFMsQ0FBckIsRUFHSCxDQUpELElBSU8sb0RBQ0hGLElBQUksR0FDUCxDQUVELFFBQVNHLENBQUFBLGlCQUFULENBQTJCRSxRQUEzQixDQUFxQyx5QkFDakMsS0FBTVEsQ0FBQUEsYUFBYSwyQkFBRyx5QkFBSCxDQUFuQixDQURpQyx5QkFFakMsR0FBSSxDQUFDUixRQUFMLENBQWUscURBQ1hILE1BQU0sQ0FBQ1ksSUFBUCxDQUFZLENBQ1JULFFBQVEsQ0FBRSxxQkFERixDQUFaLEVBRFcseUJBSVhKLFNBQVMsQ0FBRyxJQUFaLENBQ0gsQ0FMRCxJQUtPLHdEQUFJWSxhQUFhLENBQUNFLElBQWQsQ0FBbUJWLFFBQW5CLElBQWlDLEtBQXJDLENBQTRDLHFEQUMvQ0gsTUFBTSxDQUFDWSxJQUFQLENBQVksQ0FDUlQsUUFBUSxDQUFFLG1CQURGLENBQVosRUFEK0MseUJBSS9DSixTQUFTLENBQUcsSUFBWixDQUNILENBTE0saUNBS04sQ0FDSixFQUVELFFBQVNLLENBQUFBLGNBQVQsQ0FBd0JDLEtBQXhCLENBQStCLHlCQUMzQixLQUFNUyxDQUFBQSxZQUFZLDJCQUFHLGtDQUFILENBQWxCLENBRDJCLHlCQUUzQixHQUFJLENBQUNULEtBQUwsQ0FBWSxxREFDUkwsTUFBTSxDQUFDWSxJQUFQLENBQVksQ0FDUlAsS0FBSyxDQUFFLG1CQURDLENBQVosRUFEUSx5QkFJUk4sU0FBUyxDQUFHLElBQVosQ0FDSCxDQUxELElBS08sd0RBQUllLFlBQVksQ0FBQ0QsSUFBYixDQUFrQlIsS0FBbEIsSUFBNkIsS0FBakMsQ0FBd0MscURBQzNDTCxNQUFNLENBQUNZLElBQVAsQ0FBWSxDQUNSUCxLQUFLLENBQUUsa0JBREMsQ0FBWixFQUQyQyx5QkFJM0NOLFNBQVMsQ0FBRyxJQUFaLENBQ0gsQ0FMTSxpQ0FLTixDQUNKLEVBRUQsUUFBU1EsQ0FBQUEsaUJBQVQsQ0FBMkJDLFFBQTNCLENBQXFDLHlCQUNqQyxLQUFNTyxDQUFBQSxlQUFlLDJCQUFHLGdFQUFILENBQXJCLENBRGlDLHlCQUVqQyxHQUFJLENBQUNQLFFBQUwsQ0FBZSxxREFDWFIsTUFBTSxDQUFDWSxJQUFQLENBQVksQ0FDUkosUUFBUSxDQUFFLHVCQURGLENBQVosRUFEVyx5QkFJWFQsU0FBUyxDQUFHLElBQVosQ0FDSCxDQUxELElBS08sd0RBQ0hnQixlQUFlLENBQUNGLElBQWhCLENBQXFCTCxRQUFyQixJQUFtQyxLQURoQyxDQUVMLHFEQUNFUixNQUFNLENBQUNZLElBQVAsQ0FBWSxDQUNSSixRQUFRLENBQUUscUJBREYsQ0FBWixFQURGLHlCQUlFVCxTQUFTLENBQUcsSUFBWixDQUNILENBUE0saUNBT04sQ0FDSixFQUVKLENBbkVEIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgbGV0IGhhc0Vycm9ycyA9IGZhbHNlO1xuICAgIGxldCBlcnJvcnMgPSBbXTtcbiAgICB1c2VybmFtZVZhbGlkYXRvcihyZXEuYm9keS51c2VybmFtZSlcbiAgICBlbWFpbFZhbGlkYXRvcihyZXEuYm9keS5lbWFpbClcblxuICAgIGlmIChyZXEuYm9keS5pc0FjdGl2ZSA9PT0gdHJ1ZSkge1xuXG4gICAgICAgIHBhc3N3b3JkVmFsaWRhdG9yKHJlcS5ib2R5LnBhc3N3b3JkKVxuICAgICAgIFxuICAgIH1cblxuICAgIGlmIChoYXNFcnJvcnMgPT09IHRydWUpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MjIpLmpzb24oe1xuICAgICAgICAgICAgZXJyb3JzOiBlcnJvcnMsXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVzZXJuYW1lVmFsaWRhdG9yKHVzZXJuYW1lKSB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm5Qc2V1ZG8gPSAvXihbYS16QS1aMC05LV9dezIsMzZ9KSQvO1xuICAgICAgICBpZiAoIXVzZXJuYW1lKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IFwiTGUgcHNldWRvIGV0IHJlcXVpc1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAocGF0dGVyblBzZXVkby50ZXN0KHVzZXJuYW1lKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogXCJQc2V1ZG8gbm9uIHZhbGlkZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZW1haWxWYWxpZGF0b3IoZW1haWwpIHtcbiAgICAgICAgY29uc3QgcGF0dGVybkVtYWlsID0gL15bXFx3LVxcLl0rQChbXFx3LV0rXFwuKStbXFx3LV17Miw0fSQvO1xuICAgICAgICBpZiAoIWVtYWlsKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgZW1haWw6IFwiTCdlbWFpbCBldCByZXF1aXNcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHBhdHRlcm5FbWFpbC50ZXN0KGVtYWlsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBlbWFpbDogXCJFbWFpbCBub24gdmFsaWRlXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBwYXNzd29yZFZhbGlkYXRvcihwYXNzd29yZCkge1xuICAgICAgICBjb25zdCBwYXR0ZXJuUGFzc3dvcmQgPSAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlswLTldKSg/PS4qWyFAI1xcJCVcXF4mXFwqXSkoPz0uezgsfSkvO1xuICAgICAgICBpZiAoIXBhc3N3b3JkKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IFwiTGUgcGFzc3dvcmQgZXQgcmVxdWlzXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHBhdHRlcm5QYXNzd29yZC50ZXN0KHBhc3N3b3JkKSA9PT0gZmFsc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IFwiUGFzc3dvcmQgbm9uIHZhbGlkZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG59OyJdfQ==