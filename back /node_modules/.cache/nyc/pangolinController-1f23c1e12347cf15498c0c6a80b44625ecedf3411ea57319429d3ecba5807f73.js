function cov_1emgrtceil(){var path="/home/noydono/Documents/Git/Pangolin/back/app/controllers/pangolinController.js";var hash="4b46573a21565b0ad11c189f58bfd68491763be1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/noydono/Documents/Git/Pangolin/back/app/controllers/pangolinController.js",statementMap:{"0":{start:{line:1,column:22},end:{line:1,column:56}},"1":{start:{line:2,column:10},end:{line:2,column:33}},"2":{start:{line:3,column:13},end:{line:3,column:15}},"3":{start:{line:5,column:0},end:{line:107,column:2}},"4":{start:{line:10,column:27},end:{line:10,column:78}},"5":{start:{line:11,column:8},end:{line:31,column:9}},"6":{start:{line:12,column:12},end:{line:16,column:15}},"7":{start:{line:18,column:27},end:{line:18,column:54}},"8":{start:{line:19,column:12},end:{line:29,column:15}},"9":{start:{line:21,column:16},end:{line:28,column:17}},"10":{start:{line:24,column:20},end:{line:27,column:22}},"11":{start:{line:30,column:12},end:{line:30,column:47}},"12":{start:{line:37,column:25},end:{line:37,column:97}},"13":{start:{line:38,column:8},end:{line:57,column:9}},"14":{start:{line:39,column:12},end:{line:41,column:15}},"15":{start:{line:43,column:26},end:{line:43,column:60}},"16":{start:{line:44,column:12},end:{line:56,column:15}},"17":{start:{line:63,column:8},end:{line:81,column:10}},"18":{start:{line:71,column:16},end:{line:79,column:17}},"19":{start:{line:72,column:20},end:{line:76,column:23}},"20":{start:{line:78,column:20},end:{line:78,column:51}},"21":{start:{line:87,column:8},end:{line:103,column:10}},"22":{start:{line:94,column:12},end:{line:102,column:13}},"23":{start:{line:95,column:16},end:{line:99,column:19}},"24":{start:{line:101,column:16},end:{line:101,column:46}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:14},end:{line:7,column:15}},loc:{start:{line:7,column:34},end:{line:33,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:26},end:{line:19,column:27}},loc:{start:{line:19,column:51},end:{line:29,column:13}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:35,column:11},end:{line:35,column:12}},loc:{start:{line:35,column:31},end:{line:59,column:5}},line:35},"3":{name:"(anonymous_3)",decl:{start:{line:61,column:12},end:{line:61,column:13}},loc:{start:{line:61,column:32},end:{line:83,column:5}},line:61},"4":{name:"(anonymous_4)",decl:{start:{line:70,column:12},end:{line:70,column:13}},loc:{start:{line:70,column:31},end:{line:80,column:13}},line:70},"5":{name:"(anonymous_5)",decl:{start:{line:85,column:12},end:{line:85,column:13}},loc:{start:{line:85,column:32},end:{line:105,column:5}},line:85},"6":{name:"(anonymous_6)",decl:{start:{line:93,column:12},end:{line:93,column:13}},loc:{start:{line:93,column:31},end:{line:103,column:9}},line:93}},branchMap:{"0":{loc:{start:{line:11,column:8},end:{line:31,column:9}},type:"if",locations:[{start:{line:11,column:8},end:{line:31,column:9}},{start:{line:11,column:8},end:{line:31,column:9}}],line:11},"1":{loc:{start:{line:21,column:16},end:{line:28,column:17}},type:"if",locations:[{start:{line:21,column:16},end:{line:28,column:17}}],line:21},"2":{loc:{start:{line:38,column:8},end:{line:57,column:9}},type:"if",locations:[{start:{line:38,column:8},end:{line:57,column:9}},{start:{line:38,column:8},end:{line:57,column:9}}],line:38},"3":{loc:{start:{line:71,column:16},end:{line:79,column:17}},type:"if",locations:[{start:{line:71,column:16},end:{line:79,column:17}},{start:{line:71,column:16},end:{line:79,column:17}}],line:71},"4":{loc:{start:{line:94,column:12},end:{line:102,column:13}},type:"if",locations:[{start:{line:94,column:12},end:{line:102,column:13}},{start:{line:94,column:12},end:{line:102,column:13}}],line:94}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4b46573a21565b0ad11c189f58bfd68491763be1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1emgrtceil=function(){return actualCoverage;};}return actualCoverage;}cov_1emgrtceil();const PangolinModel=(cov_1emgrtceil().s[0]++,require("../models/PangolinModel")),jwt=(cov_1emgrtceil().s[1]++,require("jsonwebtoken")),errors=(cov_1emgrtceil().s[2]++,[]);cov_1emgrtceil().s[3]++;module.exports={register:async(req,res)=>{cov_1emgrtceil().f[0]++;const checkEmail=(cov_1emgrtceil().s[4]++,await PangolinModel.findOne({email:req.body.email}));cov_1emgrtceil().s[5]++;if(checkEmail){cov_1emgrtceil().b[0][0]++;cov_1emgrtceil().s[6]++;res.status(422).json({errors:[{email:"L'email existe déjà"}]});}else{cov_1emgrtceil().b[0][1]++;let pangolin=(cov_1emgrtceil().s[7]++,new PangolinModel(req.body));cov_1emgrtceil().s[8]++;pangolin.save((err,pangolin_saved)=>{cov_1emgrtceil().f[1]++;cov_1emgrtceil().s[9]++;/* istanbul ignore if */if(err){// console.log(err);
}else{cov_1emgrtceil().b[1][0]++;cov_1emgrtceil().s[10]++;res.status(201).json({_id:pangolin_saved._id,username:pangolin_saved.username});}});cov_1emgrtceil().s[11]++;await pangolin.generateAuthToken();}},login:async(req,res)=>{cov_1emgrtceil().f[2]++;const pangolin=(cov_1emgrtceil().s[12]++,await PangolinModel.findByCredentials(req.body.email,req.body.password));cov_1emgrtceil().s[13]++;if(pangolin.hasErrors){cov_1emgrtceil().b[2][0]++;cov_1emgrtceil().s[14]++;res.status(422).json({errors:pangolin.errors});}else{cov_1emgrtceil().b[2][1]++;const token=(cov_1emgrtceil().s[15]++,await pangolin.generateAuthToken());cov_1emgrtceil().s[16]++;res.status(200).json({pangolin:{_id:pangolin._id,username:pangolin.username,email:pangolin.email,created_at:pangolin.created_at,race:pangolin.race,food:pangolin.food,age:pangolin.age,famille:pangolin.famille},token});}},update:async(req,res)=>{cov_1emgrtceil().f[3]++;cov_1emgrtceil().s[17]++;await PangolinModel.findByIdAndUpdate(req.params.id,req.body,{new:true,omitUndefined:true,fields:{"_id":1,"username":1}},(err,pangolin)=>{cov_1emgrtceil().f[4]++;cov_1emgrtceil().s[18]++;if(err){cov_1emgrtceil().b[3][0]++;cov_1emgrtceil().s[19]++;res.status(422).json({errors:[{update:"Pangolin introuvable"}]});}else{cov_1emgrtceil().b[3][1]++;cov_1emgrtceil().s[20]++;res.status(200).json(pangolin);}});},delete:async(req,res)=>{cov_1emgrtceil().f[5]++;cov_1emgrtceil().s[21]++;await PangolinModel.findByIdAndDelete(req.params.id,["_id","isValide","username"],(err,pangolin)=>{cov_1emgrtceil().f[6]++;cov_1emgrtceil().s[22]++;if(err){cov_1emgrtceil().b[4][0]++;cov_1emgrtceil().s[23]++;res.status(422).json({errors:[{delete:"Pangolin introuvable"}]});}else{cov_1emgrtceil().b[4][1]++;cov_1emgrtceil().s[24]++;res.status(200).json(pangolin);}});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhbmdvbGluQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJQYW5nb2xpbk1vZGVsIiwicmVxdWlyZSIsImp3dCIsImVycm9ycyIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZWdpc3RlciIsInJlcSIsInJlcyIsImNoZWNrRW1haWwiLCJmaW5kT25lIiwiZW1haWwiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsInBhbmdvbGluIiwic2F2ZSIsImVyciIsInBhbmdvbGluX3NhdmVkIiwiX2lkIiwidXNlcm5hbWUiLCJnZW5lcmF0ZUF1dGhUb2tlbiIsImxvZ2luIiwiZmluZEJ5Q3JlZGVudGlhbHMiLCJwYXNzd29yZCIsImhhc0Vycm9ycyIsInRva2VuIiwiY3JlYXRlZF9hdCIsInJhY2UiLCJmb29kIiwiYWdlIiwiZmFtaWxsZSIsInVwZGF0ZSIsImZpbmRCeUlkQW5kVXBkYXRlIiwicGFyYW1zIiwiaWQiLCJuZXciLCJvbWl0VW5kZWZpbmVkIiwiZmllbGRzIiwiZGVsZXRlIiwiZmluZEJ5SWRBbmREZWxldGUiXSwibWFwcGluZ3MiOiJncUlBZVk7MkZBZlosS0FBTUEsQ0FBQUEsYUFBYSwwQkFBR0MsT0FBTyxDQUFDLHlCQUFELENBQVYsQ0FBbkIsQ0FDSUMsR0FBRywwQkFBR0QsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQURQLENBRUlFLE1BQU0sMEJBQUcsRUFBSCxDQUZWLEMsd0JBSUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUViQyxRQUFRLENBQUUsTUFBT0MsR0FBUCxDQUFZQyxHQUFaLEdBQW9CLHlCQUcxQixLQUFNQyxDQUFBQSxVQUFVLDBCQUFHLEtBQU1ULENBQUFBLGFBQWEsQ0FBQ1UsT0FBZCxDQUFzQixDQUFDQyxLQUFLLENBQUNKLEdBQUcsQ0FBQ0ssSUFBSixDQUFTRCxLQUFoQixDQUF0QixDQUFULENBQWhCLENBSDBCLHdCQUkxQixHQUFJRixVQUFKLENBQWdCLG9EQUNaRCxHQUFHLENBQUNLLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFo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QUFFLE1BQU9oQyxHQUFQLENBQVlDLEdBQVosR0FBb0Isa0RBRXhCLEtBQU1SLENBQUFBLGFBQWEsQ0FBQ3dDLGlCQUFkLENBQWdDakMsR0FBRyxDQUFDMkIsTUFBSixDQUFXQyxFQUEzQyxDQUNGLENBQ0ksS0FESixDQUVJLFVBRkosQ0FHSSxVQUhKLENBREUsQ0FNRixDQUFDbEIsR0FBRCxDQUFNRixRQUFOLEdBQW1CLGtEQUNuQixHQUFJRSxHQUFKLENBQVMscURBQ0xULEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQ2pCWCxNQUFNLENBQUUsQ0FBQyxDQUNMb0MsTUFBTSxDQUFFLHNCQURILENBQUQsQ0FEUyxDQUFyQixFQUtILENBTkQsSUFNTyxxREFDSC9CLEdBQUcsQ0FBQ0ssTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCQyxRQUFyQixFQUNILENBQ0osQ0FoQkssQ0FBTixDQWtCSCxDQXBHWSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFBhbmdvbGluTW9kZWwgPSByZXF1aXJlKFwiLi4vbW9kZWxzL1BhbmdvbGluTW9kZWxcIiksXG4gICAgand0ID0gcmVxdWlyZShcImpzb253ZWJ0b2tlblwiKSxcbiAgICBlcnJvcnMgPSBbXTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgICByZWdpc3RlcjogYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG5cblxuICAgICAgICBjb25zdCBjaGVja0VtYWlsID0gYXdhaXQgUGFuZ29saW5Nb2RlbC5maW5kT25lKHtlbWFpbDpyZXEuYm9keS5lbWFpbH0pO1xuICAgICAgICBpZiAoY2hlY2tFbWFpbCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MjIpLmpzb24oe1xuICAgICAgICAgICAgICAgIGVycm9yczogW3tcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IFwiTCdlbWFpbCBleGlzdGUgZMOpasOgXCJcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHBhbmdvbGluID0gbmV3IFBhbmdvbGluTW9kZWwocmVxLmJvZHkpO1xuICAgICAgICAgICAgcGFuZ29saW4uc2F2ZSgoZXJyLCBwYW5nb2xpbl9zYXZlZCkgPT4ge1xuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IHBhbmdvbGluX3NhdmVkLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBwYW5nb2xpbl9zYXZlZC51c2VybmFtZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgcGFuZ29saW4uZ2VuZXJhdGVBdXRoVG9rZW4oKTtcbiAgICAgICAgfVxuXG4gICAgfSxcblxuICAgIGxvZ2luOiBhc3luYyAocmVxLCByZXMpID0+IHtcblxuICAgICAgICBjb25zdCBwYW5nb2xpbiA9IGF3YWl0IFBhbmdvbGluTW9kZWwuZmluZEJ5Q3JlZGVudGlhbHMocmVxLmJvZHkuZW1haWwsIHJlcS5ib2R5LnBhc3N3b3JkKTtcbiAgICAgICAgaWYgKHBhbmdvbGluLmhhc0Vycm9ycykge1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MjIpLmpzb24oe1xuICAgICAgICAgICAgICAgIGVycm9yczogcGFuZ29saW4uZXJyb3JzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHBhbmdvbGluLmdlbmVyYXRlQXV0aFRva2VuKCk7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgcGFuZ29saW46IHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiBwYW5nb2xpbi5faWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBwYW5nb2xpbi51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHBhbmdvbGluLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBwYW5nb2xpbi5jcmVhdGVkX2F0LFxuICAgICAgICAgICAgICAgICAgICByYWNlOiBwYW5nb2xpbi5yYWNlLFxuICAgICAgICAgICAgICAgICAgICBmb29kOiBwYW5nb2xpbi5mb29kLFxuICAgICAgICAgICAgICAgICAgICBhZ2U6IHBhbmdvbGluLmFnZSxcbiAgICAgICAgICAgICAgICAgICAgZmFtaWxsZTogcGFuZ29saW4uZmFtaWxsZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSxcblxuICAgIHVwZGF0ZTogYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG5cbiAgICAgICAgYXdhaXQgUGFuZ29saW5Nb2RlbC5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgICAgICAgIHJlcS5wYXJhbXMuaWQsIHJlcS5ib2R5LCBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuZXc6IHRydWUsXG4gICAgICAgICAgICAgICAgb21pdFVuZGVmaW5lZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHsgXCJfaWRcIjoxLCBcInVzZXJuYW1lXCI6IDEsIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyLCBwYW5nb2xpbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHsgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQyMikuanNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiBcIlBhbmdvbGluIGludHJvdXZhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwYW5nb2xpbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgfSxcblxuICAgIGRlbGV0ZTogYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG5cbiAgICAgICAgYXdhaXQgUGFuZ29saW5Nb2RlbC5maW5kQnlJZEFuZERlbGV0ZShyZXEucGFyYW1zLmlkLCBcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBcIl9pZFwiLFxuICAgICAgICAgICAgICAgIFwiaXNWYWxpZGVcIixcbiAgICAgICAgICAgICAgICBcInVzZXJuYW1lXCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgKGVyciwgcGFuZ29saW4pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQyMikuanNvbih7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZTogXCJQYW5nb2xpbiBpbnRyb3V2YWJsZVwiXG4gICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihwYW5nb2xpbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIH1cblxufTsiXX0=