"use strict";function cov_1schraav8g(){var path="/home/noydono/Documents/Git/WorldCraft/app/middleware/updateValidator.js";var hash="efd5fbaaecd2a48a6292aca225abda1b64d8b40e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/noydono/Documents/Git/WorldCraft/app/middleware/updateValidator.js",statementMap:{"0":{start:{line:3,column:0},end:{line:58,column:2}},"1":{start:{line:4,column:20},end:{line:4,column:25}},"2":{start:{line:5,column:17},end:{line:5,column:19}},"3":{start:{line:6,column:4},end:{line:6,column:40}},"4":{start:{line:7,column:4},end:{line:7,column:34}},"5":{start:{line:8,column:4},end:{line:8,column:40}},"6":{start:{line:12,column:4},end:{line:18,column:5}},"7":{start:{line:13,column:8},end:{line:15,column:11}},"8":{start:{line:17,column:8},end:{line:17,column:14}},"9":{start:{line:21,column:30},end:{line:21,column:55}},"10":{start:{line:22,column:8},end:{line:29,column:9}},"11":{start:{line:24,column:15},end:{line:29,column:9}},"12":{start:{line:25,column:12},end:{line:27,column:15}},"13":{start:{line:28,column:12},end:{line:28,column:29}},"14":{start:{line:33,column:29},end:{line:33,column:63}},"15":{start:{line:34,column:8},end:{line:41,column:9}},"16":{start:{line:36,column:15},end:{line:41,column:9}},"17":{start:{line:37,column:12},end:{line:39,column:15}},"18":{start:{line:40,column:12},end:{line:40,column:29}},"19":{start:{line:45,column:32},end:{line:45,column:96}},"20":{start:{line:46,column:8},end:{line:55,column:9}},"21":{start:{line:48,column:15},end:{line:55,column:9}},"22":{start:{line:51,column:12},end:{line:53,column:15}},"23":{start:{line:54,column:12},end:{line:54,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:37},end:{line:58,column:1}},line:3},"1":{name:"usernameValidator",decl:{start:{line:20,column:13},end:{line:20,column:30}},loc:{start:{line:20,column:41},end:{line:30,column:5}},line:20},"2":{name:"emailValidator",decl:{start:{line:32,column:13},end:{line:32,column:27}},loc:{start:{line:32,column:35},end:{line:42,column:5}},line:32},"3":{name:"passwordValidator",decl:{start:{line:44,column:13},end:{line:44,column:30}},loc:{start:{line:44,column:41},end:{line:56,column:5}},line:44}},branchMap:{"0":{loc:{start:{line:12,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:12,column:4},end:{line:18,column:5}},{start:{line:12,column:4},end:{line:18,column:5}}],line:12},"1":{loc:{start:{line:22,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:29,column:9}},{start:{line:22,column:8},end:{line:29,column:9}}],line:22},"2":{loc:{start:{line:24,column:15},end:{line:29,column:9}},type:"if",locations:[{start:{line:24,column:15},end:{line:29,column:9}},{start:{line:24,column:15},end:{line:29,column:9}}],line:24},"3":{loc:{start:{line:34,column:8},end:{line:41,column:9}},type:"if",locations:[{start:{line:34,column:8},end:{line:41,column:9}},{start:{line:34,column:8},end:{line:41,column:9}}],line:34},"4":{loc:{start:{line:36,column:15},end:{line:41,column:9}},type:"if",locations:[{start:{line:36,column:15},end:{line:41,column:9}},{start:{line:36,column:15},end:{line:41,column:9}}],line:36},"5":{loc:{start:{line:46,column:8},end:{line:55,column:9}},type:"if",locations:[{start:{line:46,column:8},end:{line:55,column:9}},{start:{line:46,column:8},end:{line:55,column:9}}],line:46},"6":{loc:{start:{line:48,column:15},end:{line:55,column:9}},type:"if",locations:[{start:{line:48,column:15},end:{line:55,column:9}},{start:{line:48,column:15},end:{line:55,column:9}}],line:48}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"efd5fbaaecd2a48a6292aca225abda1b64d8b40e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1schraav8g=function(){return actualCoverage;};}return actualCoverage;}cov_1schraav8g();cov_1schraav8g().s[0]++;module.exports=(req,res,next)=>{cov_1schraav8g().f[0]++;let hasErrors=(cov_1schraav8g().s[1]++,false);let errors=(cov_1schraav8g().s[2]++,[]);cov_1schraav8g().s[3]++;usernameValidator(req.body.username);cov_1schraav8g().s[4]++;emailValidator(req.body.email);cov_1schraav8g().s[5]++;passwordValidator(req.body.password);cov_1schraav8g().s[6]++;if(hasErrors===true){cov_1schraav8g().b[0][0]++;cov_1schraav8g().s[7]++;res.status(422).json({errors:errors});}else{cov_1schraav8g().b[0][1]++;cov_1schraav8g().s[8]++;next();}function usernameValidator(username){cov_1schraav8g().f[1]++;const patternPseudo=(cov_1schraav8g().s[9]++,/^([a-zA-Z0-9-_]{2,36})$/);cov_1schraav8g().s[10]++;if(!username){cov_1schraav8g().b[1][0]++;}else{cov_1schraav8g().b[1][1]++;cov_1schraav8g().s[11]++;if(patternPseudo.test(username)===false){cov_1schraav8g().b[2][0]++;cov_1schraav8g().s[12]++;errors.push({username:"Pseudo non valide"});cov_1schraav8g().s[13]++;hasErrors=true;}else{cov_1schraav8g().b[2][1]++;}}};function emailValidator(email){cov_1schraav8g().f[2]++;const patternEmail=(cov_1schraav8g().s[14]++,/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/);cov_1schraav8g().s[15]++;if(!email){cov_1schraav8g().b[3][0]++;}else{cov_1schraav8g().b[3][1]++;cov_1schraav8g().s[16]++;if(patternEmail.test(email)===false){cov_1schraav8g().b[4][0]++;cov_1schraav8g().s[17]++;errors.push({email:"Email non valide"});cov_1schraav8g().s[18]++;hasErrors=true;}else{cov_1schraav8g().b[4][1]++;}}};function passwordValidator(password){cov_1schraav8g().f[3]++;const patternPassword=(cov_1schraav8g().s[19]++,/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/);cov_1schraav8g().s[20]++;if(!password){cov_1schraav8g().b[5][0]++;}else{cov_1schraav8g().b[5][1]++;cov_1schraav8g().s[21]++;if(patternPassword.test(password)===false){cov_1schraav8g().b[6][0]++;cov_1schraav8g().s[22]++;errors.push({password:"Password non valide"});cov_1schraav8g().s[23]++;hasErrors=true;}else{cov_1schraav8g().b[6][1]++;}}};};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZVZhbGlkYXRvci5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicmVxIiwicmVzIiwibmV4dCIsImhhc0Vycm9ycyIsImVycm9ycyIsInVzZXJuYW1lVmFsaWRhdG9yIiwiYm9keSIsInVzZXJuYW1lIiwiZW1haWxWYWxpZGF0b3IiLCJlbWFpbCIsInBhc3N3b3JkVmFsaWRhdG9yIiwicGFzc3dvcmQiLCJzdGF0dXMiLCJqc29uIiwicGF0dGVyblBzZXVkbyIsInRlc3QiLCJwdXNoIiwicGF0dGVybkVtYWlsIiwicGF0dGVyblBhc3N3b3JkIl0sIm1hcHBpbmdzIjoiQUFBQSxhLG1qSUFlWTttSEFiWkEsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLEdBQUQsQ0FBTUMsR0FBTixDQUFXQyxJQUFYLEdBQW9CLHlCQUNqQyxHQUFJQyxDQUFBQSxTQUFTLDBCQUFHLEtBQUgsQ0FBYixDQUNBLEdBQUlDLENBQUFBLE1BQU0sMEJBQUcsRUFBSCxDQUFWLENBRmlDLHdCQUdqQ0MsaUJBQWlCLENBQUNMLEdBQUcsQ0FBQ00sSUFBSixDQUFTQyxRQUFWLENBQWpCLENBSGlDLHdCQUlqQ0MsY0FBYyxDQUFDUixHQUFHLENBQUNNLElBQUosQ0FBU0csS0FBVixDQUFkLENBSmlDLHdCQUtqQ0MsaUJBQWlCLENBQUNWLEdBQUcsQ0FBQ00sSUFBSixDQUFTSyxRQUFWLENBQWpCLENBTGlDLHdCQVNqQyxHQUFJUixTQUFTLEdBQUssSUFBbEIsQ0FBd0Isb0RBQ3BCRixHQUFHLENBQUNXLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUNqQlQsTUFBTSxDQUFFQSxNQURTLENBQXJCLEVBR0gsQ0FKRCxJQUlPLG9EQUNIRixJQUFJLEdBQ1AsQ0FFRCxRQUFTRyxDQUFBQSxpQkFBVCxDQUEyQkUsUUFBM0IsQ0FBcUMseUJBQ2pDLEtBQU1PLENBQUFBLGFBQWEsMEJBQUcseUJBQUgsQ0FBbkIsQ0FEaUMseUJBRWpDLEdBQUksQ0FBQ1AsUUFBTCxDQUFlLDRCQUVkLENBRkQsSUFFTyx3REFBSU8sYUFBYSxDQUFDQyxJQUFkLENBQW1CUixRQUFuQixJQUFpQyxLQUFyQyxDQUE0QyxxREFDL0NILE1BQU0sQ0FBQ1ksSUFBUCxDQUFZLENBQ1JULFFBQVEsQ0FBRSxtQkFERixDQUFaLEVBRCtDLHlCQUkvQ0osU0FBUyxDQUFHLElBQVosQ0FDSCxDQUxNLGlDQUtOLENBQ0osRUFFRCxRQUFTSyxDQUFBQSxjQUFULENBQXdCQyxLQUF4QixDQUErQix5QkFDM0IsS0FBTVEsQ0FBQUEsWUFBWSwyQkFBRyxrQ0FBSCxDQUFsQixDQUQyQix5QkFFM0IsR0FBSSxDQUFDUixLQUFMLENBQVksNEJBRVgsQ0FGRCxJQUVPLHdEQUFJUSxZQUFZLENBQUNGLElBQWIsQ0FBa0JOLEtBQWxCLElBQTZCLEtBQWpDLENBQXdDLHFEQUMzQ0wsTUFBTSxDQUFDWSxJQUFQLENBQVksQ0FDUlAsS0FBSyxDQUFFLGtCQURDLENBQVosRUFEMkMseUJBSTNDTixTQUFTLENBQUcsSUFBWixDQUNILENBTE0saUNBS04sQ0FDSixFQUVELFFBQVNPLENBQUFBLGlCQUFULENBQTJCQyxRQUEzQixDQUFxQyx5QkFDakMsS0FBTU8sQ0FBQUEsZUFBZSwyQkFBRyxnRUFBSCxDQUFyQixDQURpQyx5QkFFakMsR0FBSSxDQUFDUCxRQUFMLENBQWUsNEJBRWQsQ0FGRCxJQUVPLHdEQUNITyxlQUFlLENBQUNILElBQWhCLENBQXFCSixRQUFyQixJQUFtQyxLQURoQyxDQUVMLHFEQUNFUCxNQUFNLENBQUNZLElBQVAsQ0FBWSxDQUNSTCxRQUFRLENBQUUscUJBREYsQ0FBWixFQURGLHlCQUlFUixTQUFTLENBQUcsSUFBWixDQUNILENBUE0saUNBT04sQ0FDSixFQUVKLENBdkREIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgbGV0IGhhc0Vycm9ycyA9IGZhbHNlO1xuICAgIGxldCBlcnJvcnMgPSBbXTtcbiAgICB1c2VybmFtZVZhbGlkYXRvcihyZXEuYm9keS51c2VybmFtZSlcbiAgICBlbWFpbFZhbGlkYXRvcihyZXEuYm9keS5lbWFpbClcbiAgICBwYXNzd29yZFZhbGlkYXRvcihyZXEuYm9keS5wYXNzd29yZClcbiAgICAgICBcbiAgICBcblxuICAgIGlmIChoYXNFcnJvcnMgPT09IHRydWUpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MjIpLmpzb24oe1xuICAgICAgICAgICAgZXJyb3JzOiBlcnJvcnMsXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVzZXJuYW1lVmFsaWRhdG9yKHVzZXJuYW1lKSB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm5Qc2V1ZG8gPSAvXihbYS16QS1aMC05LV9dezIsMzZ9KSQvO1xuICAgICAgICBpZiAoIXVzZXJuYW1lKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIGlmIChwYXR0ZXJuUHNldWRvLnRlc3QodXNlcm5hbWUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBcIlBzZXVkbyBub24gdmFsaWRlXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBlbWFpbFZhbGlkYXRvcihlbWFpbCkge1xuICAgICAgICBjb25zdCBwYXR0ZXJuRW1haWwgPSAvXltcXHctXFwuXStAKFtcXHctXStcXC4pK1tcXHctXXsyLDR9JC87XG4gICAgICAgIGlmICghZW1haWwpIHtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2UgaWYgKHBhdHRlcm5FbWFpbC50ZXN0KGVtYWlsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBlbWFpbDogXCJFbWFpbCBub24gdmFsaWRlXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBwYXNzd29yZFZhbGlkYXRvcihwYXNzd29yZCkge1xuICAgICAgICBjb25zdCBwYXR0ZXJuUGFzc3dvcmQgPSAvXig/PS4qW2Etel0pKD89LipbQS1aXSkoPz0uKlswLTldKSg/PS4qWyFAI1xcJCVcXF4mXFwqXSkoPz0uezgsfSkvO1xuICAgICAgICBpZiAoIXBhc3N3b3JkKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHBhdHRlcm5QYXNzd29yZC50ZXN0KHBhc3N3b3JkKSA9PT0gZmFsc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IFwiUGFzc3dvcmQgbm9uIHZhbGlkZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG59OyJdfQ==